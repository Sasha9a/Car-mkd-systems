<h3 class="dividing-header">Пользователь</h3>

<div class="grid">
  <div class="col-12 md:col-6 xl:col-4">
    <div class="p-fluid">

      <div class="field">
        <label class="fw-bold required-field">Логин</label>
        <input type="text" pInputText [ngClass]="{ 'ng-invalid ng-dirty': errors?.login }" [(ngModel)]="user.login">
        <small *ngIf="errors?.login" class="p-error">{{ errors.login | join }}</small>
      </div>

      <div class="field">
        <label class="fw-bold required-field">Пароль</label>
        <div class="p-inputgroup">
          <button type="button" pButton [icon]="showPassword ? 'pi pi-eye' : 'pi pi-eye-slash'" (click)="showPassword = !showPassword"></button>
          <input autocomplete="new-password" [type]="showPassword ? 'text' : 'password'" pInputText
                 [ngClass]="{ 'ng-invalid ng-dirty': errors?.password }" [(ngModel)]="user.password">
          <button type="button" pButton label="Сгенерировать" (click)="user.password = userPasswordService.generatePassword()"></button>
        </div>
        <small *ngIf="errors?.password" class="p-error">{{ errors.password | join }}</small>
      </div>

      <div class="field">
        <label class="fw-bold required-field">Роль(и)</label>
        <car-multi-select [(selectedItems)]="selectedRoles"
                          (selectedItemsChange)="setRole($event)"
                          [options]="roles"
                          [class]="errors?.roles ? 'ng-invalid ng-dirty' : ''"
                          dataKey="role">
        </car-multi-select>
        <small *ngIf="errors?.roles" class="p-error">{{ errors.roles | join }}</small>
      </div>

    </div>
  </div>

  <div class="col-12 mt-4">
    <button pButton [label]="saveButtonLabel" icon="pi pi-check" class="p-button-success mr-2" (click)="onSave(user)"></button>
    <car-go-back-button [route]="route"></car-go-back-button>
  </div>
</div>
