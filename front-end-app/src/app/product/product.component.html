<div class="card" *ngIf="product != null">
	<div class="row no-gutters">
		<label class="col-6 mb-0"
					 [style]="authService.isAuth() ? 'cursor: pointer' : ''">
			<div id="carouselImages" class="carousel slide" data-interval="false">
				<ol class="carousel-indicators" *ngIf="product.images.length != 0">
					<li *ngFor="let i of product.images; let ind = index" data-target="#carouselImages"
							[attr.data-slide-to]="ind - 1" class="bg-secondary{{ (ind == 0) ? ' active' : '' }}"></li>
				</ol>
				<div class="carousel-inner">
					<div class="carousel-item active" *ngIf="product.images.length == 0">
						<svg xmlns="http://www.w3.org/2000/svg" height="300" class="d-block rounded w-100">
							<rect width="100%" height="100%" fill="#eee"></rect>
							<text x="50%" y="50%" fill="#aaa" text-anchor="middle">Загрузить картинки</text>
						</svg>
					</div>
					<ng-container *ngIf="product.images.length != 0">
						<div *ngFor="let i of product.images; let ind = index" class="carousel-item{{ ind == 0 ? ' active' : '' }}">
							<img [src]=" 'http://localhost:3000/images/' + i" height="300" class="d-block rounded w-100">
						</div>
					</ng-container>
				</div>
				<a *ngIf="product.images.length != 0" class="carousel-control-prev"
					 href="#carouselImages" role="button" data-slide="prev">
					<span class="carousel-control-prev-icon bg-secondary" aria-hidden="true"></span>
					<span class="sr-only">Previous</span>
				</a>
				<a *ngIf="product.images.length != 0" class="carousel-control-next"
					 href="#carouselImages" role="button" data-slide="next">
					<span class="carousel-control-next-icon bg-secondary" aria-hidden="true"></span>
					<span class="sr-only">Next</span>
				</a>
			</div>
			<form *ngIf="authService.isAuth()" enctype="multipart/form-data">
				<input type="file" name="images" (change)="uploadImages($event)" accept="image/*" multiple hidden>
			</form>
		</label>
		<div class="col">
			<h4 class="card-header" [innerText]="product.name"></h4>
			<div class="card-body">
<!--				<div class="row mb-2" *ngIf="authService.isAuth()">-->
<!--					<div class="dropdown col-auto">-->
<!--						<button class="btn btn-outline-info dropdown-toggle" type="button" id="dropdownEditDiscount"-->
<!--										data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-->
<!--							Скидка-->
<!--						</button>-->
<!--						<div class="dropdown-menu" aria-labelledby="dropdownEditDiscount">-->
<!--							<div class="card-body" style="min-width: 300px;">-->
<!--								<form class="mx-2" th:action="@{'/products/' + ${product.getId()}}" method="post">-->
<!--									<input type="number" name="discount" class="form-control" min="0"-->
<!--												 th:max="(${product.getPrice() == 0}?'0':${product.getPrice() - 1})"-->
<!--												 placeholder="Введите цену...">-->
<!--									<button type="submit" class="btn btn-success col-auto mt-3">Изменить</button>-->
<!--								</form>-->
<!--							</div>-->
<!--						</div>-->
<!--					</div>-->
<!--					<form class="col-auto" th:action="@{'/products/' + ${product.getId()}}" method="post">-->
<!--						<input type="number" name="isDel" value="1" hidden>-->
<!--						<button type="submit" class="btn btn-outline-danger"-->
<!--										th:if="${product.getDiscount() != null}">-->
<!--							Удалить скидку-->
<!--						</button>-->
<!--					</form>-->
<!--				</div>-->
<!--				<div class="row align-items-center">-->
<!--					<h4 th:class="'card-text col-auto font-weight-bold mb-0' + (${product.getDiscount() == null}?' text-primary':' text-danger')"-->
<!--							th:text="${product.getDiscount() == null}?${product.convertToMoney()}:${product.convertToMoneyDiscount()}"></h4>-->
<!--					<h5 class="card-text text-secondary font-weight-bold col-auto"-->
<!--							th:if="${product.getDiscount() != null}"-->
<!--							th:utext="'<del>' + ${product.convertToMoney()} + '</del>'"></h5>-->
<!--					<div class="dropdown col-auto"-->
<!--							 th:if="${#httpServletRequest?.isUserInRole('ADMIN') and product.getDiscount() == null}">-->
<!--						<button class="btn btn-outline-secondary dropdown-toggle" type="button" id="dropdownEditPrice"-->
<!--										data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-->
<!--							Изменить цену-->
<!--						</button>-->
<!--						<div class="dropdown-menu" aria-labelledby="dropdownEditPrice">-->
<!--							<div class="card-body" style="min-width: 300px;">-->
<!--								<form class="mx-2" th:action="@{'/products/' + ${product.getId()}}" method="post">-->
<!--									<input type="number" name="price" class="form-control" min="0" max="100000"-->
<!--												 placeholder="Введите цену...">-->
<!--									<button type="submit" class="btn btn-success mt-3">Изменить</button>-->
<!--								</form>-->
<!--							</div>-->
<!--						</div>-->
<!--					</div>-->
<!--				</div>-->
				<div class="row align-items-center mt-2">
					<p class="card-text col-auto mb-0{{ product.stock > 0 ? ' text-muted' : ' text-danger' }}"
						 [innerText]="product.stock > 0 ? ('В наличии: ' + product.stock.toString()) : 'Нет в наличии'"></p>
					<div class="dropdown col-auto" *ngIf="authService.isAuth()">
						<button class="btn btn-outline-secondary dropdown-toggle" type="button" id="dropdownEditStock"
										data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							Изменить кол-во
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownEditStock">
							<div class="card-body" style="min-width: 300px;">
								<form class="mx-2" (submit)="updateStock()">
									<input type="number" [(ngModel)]="countStock" name="countStock" class="form-control" min="0" max="100000"
												 placeholder="Введите кол-во...">
									<button type="submit" class="btn btn-success mt-3">Изменить</button>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
