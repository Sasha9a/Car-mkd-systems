"use strict";var ee=Object.defineProperty,te=(m,d,r)=>d in m?ee(m,d,{enumerable:!0,configurable:!0,writable:!0,value:r}):m[d]=r,a=(m,d,r)=>(te(m,"symbol"!=typeof d?d+"":d,r),r);(self.webpackChunkcar_mkd_systems_v2=self.webpackChunkcar_mkd_systems_v2||[]).push([[542],{6542:(m,d,r)=>{r.r(d),r.d(d,{LoginModule:()=>f});var u=r(2057),_=r(2684),P=r(4207),y=r(3928),e=r(4788),c=r(6083),p=r(4751),w=r(1818),h=r(3013),L=r(6988);const E=["input"];function Z(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"i",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().onMaskToggle()}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngClass",t.toggleIconClass())}}function M(n,o){1&n&&e.GkF(0)}function D(n,o){1&n&&e.GkF(0)}function H(n,o){if(1&n&&(e.ynx(0),e.YNc(1,D,1,0,"ng-container",6),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",t.contentTemplate)}}const R=function(n){return{width:n}};function I(n,o){if(1&n&&(e.TgZ(0,"div",9),e._UZ(1,"div",0),e.qZA(),e.TgZ(2,"div",10),e._uU(3),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngClass",t.strengthClass())("ngStyle",e.VKq(3,R,t.meter?t.meter.width:"")),e.xp6(2),e.Oqu(t.infoText)}}function F(n,o){1&n&&e.GkF(0)}const B=function(n,o){return{showTransitionParams:n,hideTransitionParams:o}},J=function(n){return{value:"visible",params:n}};function N(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("click",function(i){return e.CHM(t),e.oxw().onOverlayClick(i)})("@overlayAnimation.start",function(i){return e.CHM(t),e.oxw().onAnimationStart(i)})("@overlayAnimation.done",function(i){return e.CHM(t),e.oxw().onAnimationEnd(i)}),e.YNc(2,M,1,0,"ng-container",6),e.YNc(3,H,2,1,"ng-container",7),e.YNc(4,I,4,5,"ng-template",null,8,e.W1O),e.YNc(6,F,1,0,"ng-container",6),e.qZA()}if(2&n){const t=e.MAs(5),s=e.oxw();e.Q6J("ngClass","p-password-panel p-component")("@overlayAnimation",e.VKq(9,J,e.WLB(6,B,s.showTransitionOptions,s.hideTransitionOptions))),e.xp6(2),e.Q6J("ngTemplateOutlet",s.headerTemplate),e.xp6(1),e.Q6J("ngIf",s.contentTemplate)("ngIfElse",t),e.xp6(3),e.Q6J("ngTemplateOutlet",s.footerTemplate)}}const Q={provide:p.JU,useExisting:(0,e.Gpc)(()=>S),multi:!0};let S=(()=>{class n{constructor(t,s,i,l){this.cd=t,this.config=s,this.el=i,this.overlayService=l,this.mediumRegex="^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})",this.strongRegex="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})",this.feedback=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new e.vpe,this.onBlur=new e.vpe,this.overlayVisible=!1,this.focused=!1,this.unmasked=!1,this.value=null,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"content":this.contentTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;default:this.contentTemplate=t.template}})}ngOnInit(){this.infoText=this.promptText(),this.mediumCheckRegExp=new RegExp(this.mediumRegex),this.strongCheckRegExp=new RegExp(this.strongRegex),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.updateUI(this.value||"")})}onAnimationStart(t){switch(t.toState){case"visible":this.overlay=t.element,L.P9.set("overlay",this.overlay,this.config.zIndex.overlay),this.appendContainer(),this.alignOverlay(),this.bindScrollListener(),this.bindResizeListener();break;case"void":this.unbindScrollListener(),this.unbindResizeListener(),this.overlay=null}}onAnimationEnd(t){switch(t.toState){case"void":L.P9.clear(t.element)}}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):document.getElementById(this.appendTo).appendChild(this.overlay))}alignOverlay(){this.appendTo?(this.overlay.style.minWidth=w.p.getOuterWidth(this.input.nativeElement)+"px",w.p.absolutePosition(this.overlay,this.input.nativeElement)):w.p.relativePosition(this.overlay,this.input.nativeElement)}onInput(t){this.value=t.target.value,this.onModelChange(this.value),this.onModelTouched()}onInputFocus(t){this.focused=!0,this.feedback&&(this.overlayVisible=!0),this.onFocus.emit(t)}onInputBlur(t){this.focused=!1,this.feedback&&(this.overlayVisible=!1),this.onBlur.emit(t)}onKeyUp(t){this.feedback&&(this.updateUI(t.target.value),this.overlayVisible||(this.overlayVisible=!0))}updateUI(t){let s=null,i=null;switch(this.testStrength(t)){case 1:s=this.weakText(),i={strength:"weak",width:"33.33%"};break;case 2:s=this.mediumText(),i={strength:"medium",width:"66.66%"};break;case 3:s=this.strongText(),i={strength:"strong",width:"100%"};break;default:s=this.promptText(),i=null}this.meter=i,this.infoText=s}onMaskToggle(){this.unmasked=!this.unmasked}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement})}testStrength(t){let s=0;return this.strongCheckRegExp.test(t)?s=3:this.mediumCheckRegExp.test(t)?s=2:t.length&&(s=1),s}writeValue(t){this.value=void 0===t?null:t,this.feedback&&this.updateUI(this.value||""),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new w.V(this.input.nativeElement,()=>{this.overlayVisible&&(this.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()}bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&(this.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}containerClass(){return{"p-password p-component p-inputwrapper":!0,"p-input-icon-right":this.toggleMask}}inputFieldClass(){return{"p-password-input":!0,"p-disabled":this.disabled}}toggleIconClass(){return this.unmasked?"pi pi-eye-slash":"pi pi-eye"}strengthClass(){return`p-password-strength ${this.meter?this.meter.strength:""}`}filled(){return null!=this.value&&this.value.toString().length>0}promptText(){return this.promptLabel||this.getTranslation(h.ws.PASSWORD_PROMPT)}weakText(){return this.weakLabel||this.getTranslation(h.ws.WEAK)}mediumText(){return this.mediumLabel||this.getTranslation(h.ws.MEDIUM)}strongText(){return this.strongLabel||this.getTranslation(h.ws.STRONG)}restoreAppend(){this.overlay&&this.appendTo&&("body"===this.appendTo?document.body.removeChild(this.overlay):document.getElementById(this.appendTo).removeChild(this.overlay))}inputType(){return this.unmasked?"text":"password"}getTranslation(t){return this.config.getTranslation(t)}ngOnDestroy(){this.overlay&&(L.P9.clear(this.overlay),this.overlay=null),this.restoreAppend(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(h.b4),e.Y36(e.SBq),e.Y36(h.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-password"]],contentQueries:function(t,s,i){if(1&t&&e.Suo(i,h.jx,4),2&t){let l;e.iGM(l=e.CRH())&&(s.templates=l)}},viewQuery:function(t,s){if(1&t&&e.Gf(E,5),2&t){let i;e.iGM(i=e.CRH())&&(s.input=i.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(t,s){2&t&&e.ekj("p-inputwrapper-filled",s.filled())("p-inputwrapper-focus",s.focused)},inputs:{disabled:"disabled",promptLabel:"promptLabel",mediumRegex:"mediumRegex",strongRegex:"strongRegex",weakLabel:"weakLabel",mediumLabel:"mediumLabel",strongLabel:"strongLabel",inputId:"inputId",feedback:"feedback",appendTo:"appendTo",toggleMask:"toggleMask",inputStyleClass:"inputStyleClass",styleClass:"styleClass",style:"style",inputStyle:"inputStyle",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",placeholder:"placeholder"},outputs:{onFocus:"onFocus",onBlur:"onBlur"},features:[e._Bn([Q])],decls:5,vars:14,consts:[[3,"ngClass","ngStyle"],["pInputText","",3,"ngClass","ngStyle","value","input","focus","blur","keyup"],["input",""],[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"],["overlay",""],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["content",""],[1,"p-password-meter"],["className","p-password-info"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"input",1,2),e.NdJ("input",function(l){return s.onInput(l)})("focus",function(l){return s.onInputFocus(l)})("blur",function(l){return s.onInputBlur(l)})("keyup",function(l){return s.onKeyUp(l)}),e.qZA(),e.YNc(3,Z,1,1,"i",3),e.YNc(4,N,7,11,"div",3),e.qZA()),2&t&&(e.Tol(s.styleClass),e.Q6J("ngClass",s.containerClass())("ngStyle",s.style),e.xp6(1),e.Tol(s.inputStyleClass),e.Q6J("ngClass",s.inputFieldClass())("ngStyle",s.inputStyle)("value",s.value),e.uIk("id",s.inputId)("type",s.inputType())("placeholder",s.placeholder),e.xp6(2),e.Q6J("ngIf",s.toggleMask),e.xp6(1),e.Q6J("ngIf",s.overlayVisible))},directives:[u.mk,u.PC,y.o,u.O5,u.tP],styles:[".p-password{position:relative;display:inline-flex}.p-password-panel{position:absolute;top:0;left:0}.p-password .p-password-panel{min-width:100%}.p-password-meter{height:10px}.p-password-strength{height:100%;width:0;transition:width 1s ease-in-out}.p-fluid .p-password{display:flex}"],encapsulation:2,data:{animation:[(0,c.X$)("overlayAnimation",[(0,c.eR)(":enter",[(0,c.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,c.jt)("{{showTransitionParams}}")]),(0,c.eR)(":leave",[(0,c.jt)("{{hideTransitionParams}}",(0,c.oB)({opacity:0}))])])]},changeDetection:0}),n})(),V=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,y.j],h.m8]}),n})();var A=r(9309),x=r(4762),k=r(9311),O=r(2066);let g=class{constructor(){a(this,"login"),a(this,"password")}};(0,x.gn)([(0,k.C)(),(0,O.XV)({message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"})],g.prototype,"login",void 0),(0,x.gn)([(0,k.C)(),(0,O.XV)({message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})],g.prototype,"password",void 0),g=(0,x.gn)([(0,k.C)()],g);var Y=r(8280),U=r(1614),q=r(9441),j=r(3041),W=r(7596);function G(n,o){if(1&n&&(e.TgZ(0,"small",10),e._uU(1),e.ALo(2,"join"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.errors.login))}}function K(n,o){if(1&n&&(e.TgZ(0,"small",10),e._uU(1),e.ALo(2,"join"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.errors.password))}}const z=function(n){return{"ng-invalid ng-dirty":n}},T=class{constructor(o,t,s,i,l){a(this,"authService"),a(this,"errorService"),a(this,"router"),a(this,"route"),a(this,"commonLayoutComponent"),a(this,"user",new g),a(this,"errors"),a(this,"loading",!1),a(this,"url"),a(this,"queryParams"),this.authService=o,this.errorService=t,this.router=s,this.route=i,this.commonLayoutComponent=l}ngOnInit(){this.url=this.route.snapshot.queryParams.url||"/",this.queryParams=this.url.split("?")[1]||"",this.url=this.url.split("?")[0]||this.url,this.queryParams=this.queryParams?JSON.parse('{"'+decodeURI(this.queryParams.replace(/&/g,'","').replace(/=/g,'":"'))+'"}'):{},this.authService.currentUser&&this.router.navigate([this.url],{queryParams:this.queryParams}).catch(console.error)}clickLogin(){this.loading=!0;const{valid:o,errors:t}=(0,Y.G)(this.user,g);o?(this.errors=null,this.authService.login(this.user).subscribe({next:()=>{this.loading=!1,this.errorService.addSuccessMessage("\u0412\u044b \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),this.router.navigate([this.url],{queryParams:this.queryParams}).catch(console.error),this.commonLayoutComponent.loadMenu()},error:s=>{this.loading=!1,this.errors=s.error}})):(console.error(t),this.errors=t,this.loading=!1)}setFocus(o){o.input?.nativeElement?.focus()}};let b=T;a(b,"\u0275fac",function(t){return new(t||T)(e.Y36(U.e),e.Y36(q.T),e.Y36(_.F0),e.Y36(_.gz),e.Y36(j.w))}),a(b,"\u0275cmp",e.Xpm({type:T,selectors:[["car-login"]],decls:16,vars:12,consts:[[1,"grid","justify-content-center"],["autocomplete","on",1,"col-12","sm:col-8","md:col-6","xl:col-4"],[1,"p-fluid"],[1,"field"],[1,"fw-bold","required-field"],["type","text","pInputText","","name","login",3,"ngModel","ngClass","ngModelChange","keyup.enter"],["class","p-error",4,"ngIf"],["name","password",3,"ngModel","feedback","ngClass","ngModelChange","keyup.enter"],["password",""],["pButton","","pRipple","","type","button","label","\u0412\u043e\u0439\u0442\u0438",1,"p-button-success",3,"loading","click"],[1,"p-error"]],template:function(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"form",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"label",4),e._uU(5,"\u041b\u043e\u0433\u0438\u043d"),e.qZA(),e.TgZ(6,"input",5),e.NdJ("ngModelChange",function(v){return s.user.login=v})("keyup.enter",function(){e.CHM(i);const v=e.MAs(12);return s.setFocus(v)}),e.qZA(),e.YNc(7,G,3,3,"small",6),e.qZA(),e.TgZ(8,"div",3),e.TgZ(9,"label",4),e._uU(10,"\u041f\u0430\u0440\u043e\u043b\u044c"),e.qZA(),e.TgZ(11,"p-password",7,8),e.NdJ("ngModelChange",function(v){return s.user.password=v})("keyup.enter",function(){return s.clickLogin()}),e.qZA(),e.YNc(13,K,3,3,"small",6),e.qZA(),e.TgZ(14,"div",3),e.TgZ(15,"button",9),e.NdJ("click",function(){return s.clickLogin()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(6),e.Q6J("ngModel",s.user.login)("ngClass",e.VKq(8,z,null==s.errors?null:s.errors.login)),e.xp6(1),e.Q6J("ngIf",null==s.errors?null:s.errors.login),e.xp6(4),e.Q6J("ngModel",s.user.password)("feedback",!1)("ngClass",e.VKq(10,z,null==s.errors?null:s.errors.password)),e.xp6(2),e.Q6J("ngIf",null==s.errors?null:s.errors.password),e.xp6(2),e.Q6J("loading",s.loading))},directives:[p._Y,p.JL,p.F,p.Fj,y.o,p.JJ,p.On,u.mk,u.O5,S,P.Hq,A.H],pipes:[W.A],encapsulation:2}));var $=r(4550);const X=[{path:"",component:b,data:{title:"\u041b\u043e\u0433\u0438\u043d - CMS"}}],C=class{};let f=C;a(f,"\u0275fac",function(t){return new(t||C)}),a(f,"\u0275mod",e.oAB({type:C})),a(f,"\u0275inj",e.cJS({imports:[[u.ez,_.Bz.forChild(X),y.j,p.u5,V,P.hJ,A.T,$.G]]}))}}]);