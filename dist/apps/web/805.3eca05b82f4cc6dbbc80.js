"use strict";(self.webpackChunkcar_mkd_systems_v2=self.webpackChunkcar_mkd_systems_v2||[]).push([[805],{8280:(U,j,E)=>{E.d(j,{G:()=>B});var O=E(3475),m=E(8066);class g{constructor(e,t){this.transformationType=e,this.options=t,this.recursionStack=new Set}transform(e,t,n,o,i,y=0){if(Array.isArray(t)||t instanceof Set){const p=o&&this.transformationType===m.h.PLAIN_TO_CLASS?function(s){const e=new s;return e instanceof Set||"push"in e?e:[]}(o):[];return t.forEach((h,A)=>{const V=e?e[A]:void 0;if(this.options.enableCircularCheck&&this.isCircular(h))this.transformationType===m.h.CLASS_TO_CLASS&&(p instanceof Set?p.add(h):p.push(h));else{let D;if("function"!=typeof n&&n&&n.options&&n.options.discriminator&&n.options.discriminator.property&&n.options.discriminator.subTypes){if(this.transformationType===m.h.PLAIN_TO_CLASS){D=n.options.discriminator.subTypes.find(G=>G.name===h[n.options.discriminator.property]);const L=n.typeFunction({newObject:p,object:h,property:void 0});D=void 0===D?L:D.value,n.options.keepDiscriminatorProperty||delete h[n.options.discriminator.property]}this.transformationType===m.h.CLASS_TO_CLASS&&(D=h.constructor),this.transformationType===m.h.CLASS_TO_PLAIN&&(h[n.options.discriminator.property]=n.options.discriminator.subTypes.find(T=>T.value===h.constructor).name)}else D=n;const v=this.transform(V,h,D,void 0,h instanceof Map,y+1);p instanceof Set?p.add(v):p.push(v)}}),p}if(n===String&&!i)return null==t?t:String(t);if(n===Number&&!i)return null==t?t:Number(t);if(n===Boolean&&!i)return null==t?t:Boolean(t);if((n===Date||t instanceof Date)&&!i)return t instanceof Date?new Date(t.valueOf()):null==t?t:new Date(t);if(("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0).Buffer&&(n===Buffer||t instanceof Buffer)&&!i)return null==t?t:Buffer.from(t);if(null!==(s=t)&&"object"==typeof s&&"function"==typeof s.then&&!i)return new Promise((p,h)=>{t.then(A=>p(this.transform(void 0,A,n,void 0,void 0,y+1)),h)});if(!i&&null!==t&&"object"==typeof t&&"function"==typeof t.then)return t;if("object"==typeof t&&null!==t){!n&&t.constructor!==Object&&(!Array.isArray(t)&&t.constructor===Array||(n=t.constructor)),!n&&e&&(n=e.constructor),this.options.enableCircularCheck&&this.recursionStack.add(t);const p=this.getKeys(n,t,i);let h=e||{};!e&&(this.transformationType===m.h.PLAIN_TO_CLASS||this.transformationType===m.h.CLASS_TO_CLASS)&&(h=i?new Map:n?new n:{});for(const A of p){if("__proto__"===A||"constructor"===A)continue;const V=A;let T,D=A,v=A;if(!this.options.ignoreDecorators&&n)if(this.transformationType===m.h.PLAIN_TO_CLASS){const M=O.m.findExposeMetadataByCustomName(n,A);M&&(v=M.propertyName,D=M.propertyName)}else if(this.transformationType===m.h.CLASS_TO_PLAIN||this.transformationType===m.h.CLASS_TO_CLASS){const M=O.m.findExposeMetadata(n,A);M&&M.options&&M.options.name&&(D=M.options.name)}T=this.transformationType===m.h.PLAIN_TO_CLASS?t[V]:t instanceof Map?t.get(V):t[V]instanceof Function?t[V]():t[V];let L,G=T instanceof Map;if(n&&i)L=n;else if(n){const M=O.m.findTypeMetadata(n,v);if(M){const F={newObject:h,object:t,property:v},it=M.typeFunction?M.typeFunction(F):M.reflectedType;M.options&&M.options.discriminator&&M.options.discriminator.property&&M.options.discriminator.subTypes?t[V]instanceof Array?L=M:(this.transformationType===m.h.PLAIN_TO_CLASS&&(L=M.options.discriminator.subTypes.find(q=>{if(T&&T instanceof Object&&M.options.discriminator.property in T)return q.name===T[M.options.discriminator.property]}),L=void 0===L?it:L.value,M.options.keepDiscriminatorProperty||T&&T instanceof Object&&M.options.discriminator.property in T&&delete T[M.options.discriminator.property]),this.transformationType===m.h.CLASS_TO_CLASS&&(L=T.constructor),this.transformationType===m.h.CLASS_TO_PLAIN&&T&&(T[M.options.discriminator.property]=M.options.discriminator.subTypes.find(q=>q.value===T.constructor).name)):L=it,G=G||M.reflectedType===Map}else if(this.options.targetMaps)this.options.targetMaps.filter(F=>F.target===n&&!!F.properties[v]).forEach(F=>L=F.properties[v]);else if(this.options.enableImplicitConversion&&this.transformationType===m.h.PLAIN_TO_CLASS){const F=Reflect.getMetadata("design:type",n.prototype,v);F&&(L=F)}}const z=Array.isArray(t[V])?this.getReflectedType(n,v):void 0,Q=e?e[V]:void 0;if(h.constructor.prototype){const M=Object.getOwnPropertyDescriptor(h.constructor.prototype,D);if((this.transformationType===m.h.PLAIN_TO_CLASS||this.transformationType===m.h.CLASS_TO_CLASS)&&(M&&!M.set||h[D]instanceof Function))continue}if(this.options.enableCircularCheck&&this.isCircular(T)){if(this.transformationType===m.h.CLASS_TO_CLASS){let M=T;M=this.applyCustomTransformations(M,n,A,t,this.transformationType),(void 0!==M||this.options.exposeUnsetFields)&&(h instanceof Map?h.set(D,M):h[D]=M)}}else{const M=this.transformationType===m.h.PLAIN_TO_CLASS?D:A;let F;this.transformationType===m.h.CLASS_TO_PLAIN?(F=t[M],F=this.applyCustomTransformations(F,n,M,t,this.transformationType),F=t[M]===F?T:F,F=this.transform(Q,F,L,z,G,y+1)):void 0===T&&this.options.exposeDefaultValues?F=h[D]:(F=this.transform(Q,T,L,z,G,y+1),F=this.applyCustomTransformations(F,n,M,t,this.transformationType)),(void 0!==F||this.options.exposeUnsetFields)&&(h instanceof Map?h.set(D,F):h[D]=F)}}return this.options.enableCircularCheck&&this.recursionStack.delete(t),h}return t;var s}applyCustomTransformations(e,t,n,o,i){let y=O.m.findTransformMetadatas(t,n,this.transformationType);return void 0!==this.options.version&&(y=y.filter(p=>!p.options||this.checkVersion(p.options.since,p.options.until))),y=y.filter(this.options.groups&&this.options.groups.length?p=>!p.options||this.checkGroups(p.options.groups):p=>!p.options||!p.options.groups||!p.options.groups.length),y.forEach(p=>{e=p.transformFn({value:e,key:n,obj:o,type:i,options:this.options})}),e}isCircular(e){return this.recursionStack.has(e)}getReflectedType(e,t){if(!e)return;const n=O.m.findTypeMetadata(e,t);return n?n.reflectedType:void 0}getKeys(e,t,n){let o=O.m.getStrategy(e);"none"===o&&(o=this.options.strategy||"exposeAll");let i=[];if(("exposeAll"===o||n)&&(i=t instanceof Map?Array.from(t.keys()):Object.keys(t)),n)return i;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&e&&(i=[...O.m.getExposedProperties(e,this.transformationType),...O.m.getExcludedProperties(e,this.transformationType)]),!this.options.ignoreDecorators&&e){let y=O.m.getExposedProperties(e,this.transformationType);this.transformationType===m.h.PLAIN_TO_CLASS&&(y=y.map(h=>{const A=O.m.findExposeMetadata(e,h);return A&&A.options&&A.options.name?A.options.name:h})),i=this.options.excludeExtraneousValues?y:i.concat(y);const p=O.m.getExcludedProperties(e,this.transformationType);p.length>0&&(i=i.filter(h=>!p.includes(h))),void 0!==this.options.version&&(i=i.filter(h=>{const A=O.m.findExposeMetadata(e,h);return!A||!A.options||this.checkVersion(A.options.since,A.options.until)})),i=i.filter(this.options.groups&&this.options.groups.length?h=>{const A=O.m.findExposeMetadata(e,h);return!A||!A.options||this.checkGroups(A.options.groups)}:h=>{const A=O.m.findExposeMetadata(e,h);return!(A&&A.options&&A.options.groups&&A.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(i=i.filter(y=>this.options.excludePrefixes.every(p=>y.substr(0,p.length)!==p))),i=i.filter((y,p,h)=>h.indexOf(y)===p),i}checkVersion(e,t){let n=!0;return n&&e&&(n=this.options.version>=e),n&&t&&(n=this.options.version<t),n}checkGroups(e){return!e||this.options.groups.some(t=>e.includes(t))}}const u={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},_=new class{instanceToPlain(e,t){return new g(m.h.CLASS_TO_PLAIN,{...u,...t}).transform(void 0,e,void 0,void 0,void 0,void 0)}classToPlainFromExist(e,t,n){return new g(m.h.CLASS_TO_PLAIN,{...u,...n}).transform(t,e,void 0,void 0,void 0,void 0)}plainToInstance(e,t,n){return new g(m.h.PLAIN_TO_CLASS,{...u,...n}).transform(void 0,t,e,void 0,void 0,void 0)}plainToClassFromExist(e,t,n){return new g(m.h.PLAIN_TO_CLASS,{...u,...n}).transform(e,t,void 0,void 0,void 0,void 0)}instanceToInstance(e,t){return new g(m.h.CLASS_TO_CLASS,{...u,...t}).transform(void 0,e,void 0,void 0,void 0,void 0)}classToClassFromExist(e,t,n){return new g(m.h.CLASS_TO_CLASS,{...u,...n}).transform(t,e,void 0,void 0,void 0,void 0)}serialize(e,t){return JSON.stringify(this.instanceToPlain(e,t))}deserialize(e,t,n){const o=JSON.parse(t);return this.plainToInstance(e,o,n)}deserializeArray(e,t,n){const o=JSON.parse(t);return this.plainToInstance(e,o,n)}};class Y{toString(e=!1,t=!1,n=""){const o=e?"\x1b[1m":"",i=e?"\x1b[22m":"",y=p=>` - property ${o}${n}${p}${i} has failed the following constraints: ${o}${Object.keys(this.constraints).join(", ")}${i} \n`;if(t){const p=Number.isInteger(+this.property)?`[${this.property}]`:`${n?".":""}${this.property}`;return this.constraints?y(p):this.children?this.children.map(h=>h.toString(e,!0,`${n}${p}`)).join(""):""}return`An instance of ${o}${this.target?this.target.constructor.name:"an object"}${i} has failed the validation:\n`+(this.constraints?y(this.property):"")+(this.children?this.children.map(p=>p.toString(e,!0,this.property)).join(""):"")}}var $=E(1711);function X(s){return null!==s&&"object"==typeof s&&"function"==typeof s.then}var r=E(6284);class a{constructor(e,t){this.validator=e,this.validatorOptions=t,this.awaitingPromises=[],this.ignoreAsyncValidations=!1,this.metadataStorage=(0,r.A)()}execute(e,t,n){var o;!this.metadataStorage.hasValidationMetaData&&!0===(null===(o=this.validatorOptions)||void 0===o?void 0:o.enableDebugMessages)&&console.warn("No metadata found. There is more than once class-validator version installed probably. You need to flatten your dependencies.");const h=this.metadataStorage.getTargetValidationMetadatas(e.constructor,t,this.validatorOptions&&this.validatorOptions.always||!1,this.validatorOptions&&this.validatorOptions.strictGroups||!1,this.validatorOptions?this.validatorOptions.groups:void 0),A=this.metadataStorage.groupByPropertyName(h);if(this.validatorOptions&&this.validatorOptions.forbidUnknownValues&&!h.length){const V=new Y;return(!this.validatorOptions||!this.validatorOptions.validationError||void 0===this.validatorOptions.validationError.target||!0===this.validatorOptions.validationError.target)&&(V.target=e),V.value=void 0,V.property=void 0,V.children=[],V.constraints={unknownValue:"an unknown value was passed to the validate function"},void n.push(V)}this.validatorOptions&&this.validatorOptions.whitelist&&this.whitelist(e,A,n),Object.keys(A).forEach(V=>{const D=e[V],v=A[V].filter(L=>L.type===$.P.IS_DEFINED),T=A[V].filter(L=>L.type!==$.P.IS_DEFINED&&L.type!==$.P.WHITELIST);D instanceof Promise&&T.find(L=>L.type===$.P.PROMISE_VALIDATION)?this.awaitingPromises.push(D.then(L=>{this.performValidations(e,L,V,v,T,n)})):this.performValidations(e,D,V,v,T,n)})}whitelist(e,t,n){const o=[];Object.keys(e).forEach(i=>{(!t[i]||0===t[i].length)&&o.push(i)}),o.length>0&&o.forEach(this.validatorOptions&&this.validatorOptions.forbidNonWhitelisted?i=>{const y=this.generateValidationError(e,e[i],i);y.constraints={[$.P.WHITELIST]:`property ${i} should not exist`},y.children=void 0,n.push(y)}:i=>delete e[i])}stripEmptyErrors(e){return e.filter(t=>{if(t.children&&(t.children=this.stripEmptyErrors(t.children)),0===Object.keys(t.constraints).length){if(0===t.children.length)return!1;delete t.constraints}return!0})}performValidations(e,t,n,o,i,y){const p=i.filter(v=>v.type===$.P.CUSTOM_VALIDATION),h=i.filter(v=>v.type===$.P.NESTED_VALIDATION),A=i.filter(v=>v.type===$.P.CONDITIONAL_VALIDATION),V=this.generateValidationError(e,t,n);y.push(V),this.conditionalValidations(e,t,A)&&(this.customValidations(e,t,o,V),this.mapContexts(e,t,o,V),(void 0!==t||!this.validatorOptions||!0!==this.validatorOptions.skipUndefinedProperties)&&(null===t&&this.validatorOptions&&!0===this.validatorOptions.skipNullProperties||null==t&&this.validatorOptions&&!0===this.validatorOptions.skipMissingProperties||(this.customValidations(e,t,p,V),this.nestedValidations(t,h,V.children),this.mapContexts(e,t,i,V),this.mapContexts(e,t,p,V))))}generateValidationError(e,t,n){const o=new Y;return(!this.validatorOptions||!this.validatorOptions.validationError||void 0===this.validatorOptions.validationError.target||!0===this.validatorOptions.validationError.target)&&(o.target=e),(!this.validatorOptions||!this.validatorOptions.validationError||void 0===this.validatorOptions.validationError.value||!0===this.validatorOptions.validationError.value)&&(o.value=t),o.property=n,o.children=[],o.constraints={},o}conditionalValidations(e,t,n){return n.map(o=>o.constraints[0](e,t)).reduce((o,i)=>o&&i,!0)}customValidations(e,t,n,o){n.forEach(i=>{this.metadataStorage.getTargetValidatorConstraints(i.constraintCls).forEach(y=>{if(y.async&&this.ignoreAsyncValidations||this.validatorOptions&&this.validatorOptions.stopAtFirstError&&Object.keys(o.constraints||{}).length>0)return;const p={targetName:e.constructor?e.constructor.name:void 0,property:i.propertyName,object:e,value:t,constraints:i.constraints};if(!i.each||!(Array.isArray(t)||t instanceof Set||t instanceof Map)){const v=y.instance.validate(t,p);if(X(v)){const T=v.then(L=>{if(!L){const[G,z]=this.createValidationError(e,t,i,y);o.constraints[G]=z,i.context&&(o.contexts||(o.contexts={}),o.contexts[G]=Object.assign(o.contexts[G]||{},i.context))}});this.awaitingPromises.push(T)}else if(!v){const[T,L]=this.createValidationError(e,t,i,y);o.constraints[T]=L}return}const A=(s=t,s instanceof Map?Array.from(s.values()):Array.isArray(s)?s:Array.from(s)).map(v=>y.instance.validate(v,p));var s;if(A.some(v=>X(v))){const v=A.map(L=>X(L)?L:Promise.resolve(L)),T=Promise.all(v).then(L=>{if(!L.every(z=>z)){const[z,Q]=this.createValidationError(e,t,i,y);o.constraints[z]=Q,i.context&&(o.contexts||(o.contexts={}),o.contexts[z]=Object.assign(o.contexts[z]||{},i.context))}});this.awaitingPromises.push(T)}else if(!A.every(v=>v)){const[v,T]=this.createValidationError(e,t,i,y);o.constraints[v]=T}})})}nestedValidations(e,t,n){void 0!==e&&t.forEach(o=>{if(o.type===$.P.NESTED_VALIDATION||o.type===$.P.PROMISE_VALIDATION)if(Array.isArray(e)||e instanceof Set||e instanceof Map)(e instanceof Set?Array.from(e):e).forEach((y,p)=>{this.performValidations(e,y,p.toString(),[],t,n)});else if(e instanceof Object)this.execute(e,"string"==typeof o.target?o.target:o.target.name,n);else{const i=new Y;i.value=e,i.property=o.propertyName,i.target=o.target;const[y,p]=this.createValidationError(o.target,e,o);i.constraints={[y]:p},n.push(i)}})}mapContexts(e,t,n,o){return n.forEach(i=>{if(i.context){let y;i.type===$.P.CUSTOM_VALIDATION&&(y=this.metadataStorage.getTargetValidatorConstraints(i.constraintCls)[0]);const p=this.getConstraintType(i,y);o.constraints[p]&&(o.contexts||(o.contexts={}),o.contexts[p]=Object.assign(o.contexts[p]||{},i.context))}})}createValidationError(e,t,n,o){const i=e.constructor?e.constructor.name:void 0,y=this.getConstraintType(n,o),p={targetName:i,property:n.propertyName,object:e,value:t,constraints:n.constraints};let h=n.message||"";return!n.message&&(!this.validatorOptions||this.validatorOptions&&!this.validatorOptions.dismissDefaultMessages)&&o&&o.instance.defaultMessage instanceof Function&&(h=o.instance.defaultMessage(p)),[y,class{static replaceMessageSpecialTokens(e,t){let n;return e instanceof Function?n=e(t):"string"==typeof e&&(n=e),n&&Array.isArray(t.constraints)&&t.constraints.forEach((o,i)=>{var s;n=n.replace(new RegExp(`\\$constraint${i+1}`,"g"),(s=o,Array.isArray(s)?s.join(", "):`${s}`))}),n&&null!=t.value&&"string"==typeof t.value&&(n=n.replace(/\$value/g,t.value)),n&&(n=n.replace(/\$property/g,t.property)),n&&(n=n.replace(/\$target/g,t.targetName)),n}}.replaceMessageSpecialTokens(h,p)]}getConstraintType(e,t){return t&&t.name?t.name:e.type}}class f{validate(e,t,n){return this.coreValidate(e,t,n)}async validateOrReject(e,t,n){const o=await this.coreValidate(e,t,n);if(o.length)return Promise.reject(o)}validateSync(e,t,n){const o="string"==typeof e?t:e,y="string"==typeof e?e:void 0,p=new a(this,"string"==typeof e?n:t);p.ignoreAsyncValidations=!0;const h=[];return p.execute(o,y,h),p.stripEmptyErrors(h)}coreValidate(e,t,n){const o="string"==typeof e?t:e,y="string"==typeof e?e:void 0,p=new a(this,"string"==typeof e?n:t),h=[];return p.execute(o,y,h),Promise.all(p.awaitingPromises).then(()=>p.stripEmptyErrors(h))}}var c=E(3551);function B(s,e){const t=function(s,e,t){return _.plainToInstance(s,e,void 0)}(e,s),n={},o=function(s,e,t){return"string"==typeof s?(0,c.c)(f).validateSync(s,e,void 0):(0,c.c)(f).validateSync(s,e)}(t);return o.length>0?(o.map(i=>{i.property&&!n[i.property]&&(n[i.property]=[]),i.constraints&&Object.keys(i.constraints).map(y=>{n[i.property].push(i.constraints[y])}),i.children?.length&&i.children.forEach(y=>{n[i.property][y.property]={},y.children.forEach(p=>{let h=n[i.property][y.property][p.property]=[];p.property&&!h&&(h=[]),Object.keys(p.constraints).forEach(A=>h.push(p.constraints[A]))})})}),{valid:!1,errors:n}):{valid:!0}}},9311:(U,j,E)=>{E.d(j,{C:()=>m});var O=E(3475);function m(P={}){return function(R,l){O.m.addExposeMetadata({target:R instanceof Function?R:R.constructor,propertyName:l,options:P})}}},8066:(U,j,E)=>{E.d(j,{h:()=>O});var O=(()=>{return(m=O||(O={}))[m.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",m[m.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",m[m.CLASS_TO_CLASS=2]="CLASS_TO_CLASS",O;var m})()},3475:(U,j,E)=>{E.d(j,{m:()=>P});var O=E(8066);const P=new class{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(l){this._typeMetadatas.has(l.target)||this._typeMetadatas.set(l.target,new Map),this._typeMetadatas.get(l.target).set(l.propertyName,l)}addTransformMetadata(l){this._transformMetadatas.has(l.target)||this._transformMetadatas.set(l.target,new Map),this._transformMetadatas.get(l.target).has(l.propertyName)||this._transformMetadatas.get(l.target).set(l.propertyName,[]),this._transformMetadatas.get(l.target).get(l.propertyName).push(l)}addExposeMetadata(l){this._exposeMetadatas.has(l.target)||this._exposeMetadatas.set(l.target,new Map),this._exposeMetadatas.get(l.target).set(l.propertyName,l)}addExcludeMetadata(l){this._excludeMetadatas.has(l.target)||this._excludeMetadatas.set(l.target,new Map),this._excludeMetadatas.get(l.target).set(l.propertyName,l)}findTransformMetadatas(l,g,u){return this.findMetadatas(this._transformMetadatas,l,g).filter(w=>!w.options||!0===w.options.toClassOnly&&!0===w.options.toPlainOnly||(!0===w.options.toClassOnly?u===O.h.CLASS_TO_CLASS||u===O.h.PLAIN_TO_CLASS:!0!==w.options.toPlainOnly||u===O.h.CLASS_TO_PLAIN))}findExcludeMetadata(l,g){return this.findMetadata(this._excludeMetadatas,l,g)}findExposeMetadata(l,g){return this.findMetadata(this._exposeMetadatas,l,g)}findExposeMetadataByCustomName(l,g){return this.getExposedMetadatas(l).find(u=>u.options&&u.options.name===g)}findTypeMetadata(l,g){return this.findMetadata(this._typeMetadatas,l,g)}getStrategy(l){const g=this._excludeMetadatas.get(l),u=g&&g.get(void 0),w=this._exposeMetadatas.get(l),_=w&&w.get(void 0);return u&&_||!u&&!_?"none":u?"excludeAll":"exposeAll"}getExposedMetadatas(l){return this.getMetadata(this._exposeMetadatas,l)}getExcludedMetadatas(l){return this.getMetadata(this._excludeMetadatas,l)}getExposedProperties(l,g){return this.getExposedMetadatas(l).filter(u=>!u.options||!0===u.options.toClassOnly&&!0===u.options.toPlainOnly||(!0===u.options.toClassOnly?g===O.h.CLASS_TO_CLASS||g===O.h.PLAIN_TO_CLASS:!0!==u.options.toPlainOnly||g===O.h.CLASS_TO_PLAIN)).map(u=>u.propertyName)}getExcludedProperties(l,g){return this.getExcludedMetadatas(l).filter(u=>!u.options||!0===u.options.toClassOnly&&!0===u.options.toPlainOnly||(!0===u.options.toClassOnly?g===O.h.CLASS_TO_CLASS||g===O.h.PLAIN_TO_CLASS:!0!==u.options.toPlainOnly||g===O.h.CLASS_TO_PLAIN)).map(u=>u.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(l,g){const u=l.get(g);let w;u&&(w=Array.from(u.values()).filter(C=>void 0!==C.propertyName));const _=[];for(const C of this.getAncestors(g)){const b=l.get(C);if(b){const N=Array.from(b.values()).filter(W=>void 0!==W.propertyName);_.push(...N)}}return _.concat(w||[])}findMetadata(l,g,u){const w=l.get(g);if(w){const _=w.get(u);if(_)return _}for(const _ of this.getAncestors(g)){const C=l.get(_);if(C){const b=C.get(u);if(b)return b}}}findMetadatas(l,g,u){const w=l.get(g);let _;w&&(_=w.get(u));const C=[];for(const b of this.getAncestors(g)){const N=l.get(b);N&&N.has(u)&&C.push(...N.get(u))}return C.slice().reverse().concat((_||[]).slice().reverse())}getAncestors(l){if(!l)return[];if(!this._ancestorsMap.has(l)){const g=[];for(let u=Object.getPrototypeOf(l.prototype.constructor);void 0!==u.prototype;u=Object.getPrototypeOf(u.prototype.constructor))g.push(u);this._ancestorsMap.set(l,g)}return this._ancestorsMap.get(l)}}},3551:(U,j,E)=>{E.d(j,{c:()=>l});const O=new class{constructor(){this.instances=[]}get(g){let u=this.instances.find(w=>w.type===g);return u||(u={type:g,object:new g},this.instances.push(u)),u.object}};function l(g){return O.get(g)}},3306:(U,j,E)=>{E.d(j,{Y:()=>w,l:()=>u});var O=E(3551);class m{constructor(C,b,N=!1){this.target=C,this.name=b,this.async=N}get instance(){return(0,O.c)(this.target)}}var P=E(3315),R=E(1711),l=E(6284);function u(_,C){return b=>_(C&&C.each?"each value in ":"",b)}function w(_,C){return function(b,N){!function(_){let C;if(_.validator instanceof Function){if(C=_.validator,(0,O.c)(l.I).getTargetValidatorConstraints(_.validator).length>1)throw`More than one implementation of ValidatorConstraintInterface found for validator on: ${_.target.name}:${_.propertyName}`}else{const N=_.validator;C=class{validate(K,J){return N.validate(K,J)}defaultMessage(K){return N.defaultMessage?N.defaultMessage(K):""}},(0,l.A)().addConstraintMetadata(new m(C,_.name,_.async))}const b={type:_.name&&R.P.isValid(_.name)?_.name:R.P.CUSTOM_VALIDATION,target:_.target,propertyName:_.propertyName,validationOptions:_.options,constraintCls:C,constraints:_.constraints};(0,l.A)().addValidationMetadata(new P.L(b))}({name:_.name,target:b.constructor,propertyName:N,options:C,constraints:_.constraints,validator:_.validator})}}},2066:(U,j,E)=>{E.d(j,{XV:()=>R});var O=E(3306);function R(l){return(0,O.Y)({name:"isString",validator:{validate:(g,u)=>function(l){return l instanceof String||"string"==typeof l}(g),defaultMessage:(0,O.l)(g=>g+"$property must be a string",l)}},l)}},6284:(U,j,E)=>{E.d(j,{I:()=>R,A:()=>l});var O=E(3315);class m{transform(u){const w=[];return Object.keys(u.properties).forEach(_=>{u.properties[_].forEach(C=>{w.push(new O.L({type:C.type,target:u.name,propertyName:_,constraints:C.constraints,validationTypeOptions:C.options,validationOptions:{message:C.message,groups:C.groups,always:C.always,each:C.each}}))})}),w}}class R{constructor(){this.validationMetadatas=[],this.constraintMetadatas=[]}get hasValidationMetaData(){return!!this.validationMetadatas.length}addValidationSchema(u){(new m).transform(u).forEach(_=>this.addValidationMetadata(_))}addValidationMetadata(u){this.validationMetadatas.push(u)}addConstraintMetadata(u){this.constraintMetadatas.push(u)}groupByPropertyName(u){const w={};return u.forEach(_=>{w[_.propertyName]||(w[_.propertyName]=[]),w[_.propertyName].push(_)}),w}getTargetValidationMetadatas(u,w,_,C,b){const N=I=>void 0!==I.always?I.always:(!I.groups||!I.groups.length)&&_,W=I=>!(!C||b&&b.length||!I.groups||!I.groups.length),K=this.validationMetadatas.filter(I=>(I.target===u||I.target===w)&&(!!N(I)||!W(I)&&(!(b&&b.length>0)||I.groups&&!!I.groups.find(H=>-1!==b.indexOf(H))))),Z=this.validationMetadatas.filter(I=>"string"!=typeof I.target&&I.target!==u&&(!(I.target instanceof Function)||u.prototype instanceof I.target)&&(!!N(I)||!W(I)&&(!(b&&b.length>0)||I.groups&&!!I.groups.find(H=>-1!==b.indexOf(H))))).filter(I=>!K.find(H=>H.propertyName===I.propertyName&&H.type===I.type));return K.concat(Z)}getTargetValidatorConstraints(u){return this.constraintMetadatas.filter(w=>w.target===u)}}function l(){const g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0;return g.classValidatorMetadataStorage||(g.classValidatorMetadataStorage=new R),g.classValidatorMetadataStorage}},3315:(U,j,E)=>{E.d(j,{L:()=>O});class O{constructor(P){this.groups=[],this.each=!1,this.context=void 0,this.type=P.type,this.target=P.target,this.propertyName=P.propertyName,this.constraints=P.constraints,this.constraintCls=P.constraintCls,this.validationTypeOptions=P.validationTypeOptions,P.validationOptions&&(this.message=P.validationOptions.message,this.groups=P.validationOptions.groups,this.always=P.validationOptions.always,this.each=P.validationOptions.each,this.context=P.validationOptions.context)}}},1711:(U,j,E)=>{E.d(j,{P:()=>O});let O=(()=>{class m{static isValid(R){return"isValid"!==R&&"getMessage"!==R&&-1!==Object.keys(this).map(l=>this[l]).indexOf(R)}}return m.CUSTOM_VALIDATION="customValidation",m.NESTED_VALIDATION="nestedValidation",m.PROMISE_VALIDATION="promiseValidation",m.CONDITIONAL_VALIDATION="conditionalValidation",m.WHITELIST="whitelistValidation",m.IS_DEFINED="isDefined",m})()},4762:(U,j,E)=>{function l(r,a,f,c){var x,S=arguments.length,d=S<3?a:null===c?c=Object.getOwnPropertyDescriptor(a,f):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(r,a,f,c);else for(var k=r.length-1;k>=0;k--)(x=r[k])&&(d=(S<3?x(d):S>3?x(a,f,d):x(a,f))||d);return S>3&&d&&Object.defineProperty(a,f,d),d}E.d(j,{gn:()=>l})}}]);