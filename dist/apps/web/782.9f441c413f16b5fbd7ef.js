"use strict";var te=Object.defineProperty,ie=(u,s,a)=>s in u?te(u,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[s]=a,c=(u,s,a)=>(ie(u,"symbol"!=typeof s?s+"":s,a),a);(self.webpackChunkcar_mkd_systems_v2=self.webpackChunkcar_mkd_systems_v2||[]).push([[782],{2782:(u,s,a)=>{a.r(s),a.d(s,{CarModelsModule:()=>v});var C=a(2057),f=a(4751),E=a(2684),N=a(4550),b=a(5396),Z=a(4207),S=a(3928),A=a(4020),J=a(9309),Q=a(1107),g=a(4762),m=a(9311),w=a(2066);let p=class{constructor(){c(this,"brand")}};(0,g.gn)([(0,m.C)(),(0,w.XV)({message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})],p.prototype,"brand",void 0),p=(0,g.gn)([(0,m.C)()],p);var $=a(6382),B=a(8902),k=a(3875);let _=class{constructor(){c(this,"model"),c(this,"brand")}};(0,g.gn)([(0,m.C)(),(0,w.XV)({message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})],_.prototype,"model",void 0),(0,g.gn)([(0,m.C)(),(0,k.$i)({message:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d \u0431\u0440\u0435\u043d\u0434"}),(0,B.D)(()=>$.Q)],_.prototype,"brand",void 0),_=(0,g.gn)([(0,m.C)()],_);var x=a(8280),e=a(4788),F=a(9718),H=a(2872),q=a(9441),D=a(4185),I=a(2332),Y=a(3013),U=a(3881);function j(d,r){1&d&&e._UZ(0,"car-spinner")}function O(d,r){if(1&d){const o=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",11),e.TgZ(2,"p-checkbox",12),e.NdJ("ngModelChange",function(n){return e.CHM(o),e.oxw(2).folding=n})("onChange",function(){return e.CHM(o),e.oxw(2).setFolding()}),e.qZA(),e.TgZ(3,"label",13),e._uU(4,"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0441\u0432\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u0435"),e.qZA(),e.qZA(),e.qZA()}if(2&d){const o=e.oxw(2);e.xp6(2),e.Q6J("ngModel",o.folding),e.xp6(1),e.Q6J("for","folding")}}function V(d,r){if(1&d){const o=e.EpF();e.TgZ(0,"p",23),e.TgZ(1,"span",24),e.NdJ("click",function(n){e.CHM(o);const i=e.oxw(2).$implicit,l=e.oxw(3);return n.stopPropagation(),l.editableId=i._id,l.brandEdit.brand=i.brand}),e._uU(2),e.qZA(),e.qZA()}if(2&d){const o=e.oxw(2).$implicit;e.xp6(2),e.hij(" ",o.brand," ")}}function G(d,r){if(1&d){const o=e.EpF();e.TgZ(0,"div",25),e.NdJ("click",function(n){return n.stopPropagation()}),e.TgZ(1,"button",26),e.NdJ("click",function(){e.CHM(o);const n=e.oxw(2).$implicit,i=e.oxw(3);return i.updateBrand(n,i.brandEdit)}),e.qZA(),e.TgZ(2,"input",27),e.NdJ("ngModelChange",function(n){return e.CHM(o),e.oxw(5).brandEdit.brand=n})("keydown.enter",function(n){e.CHM(o);const i=e.oxw(2).$implicit,l=e.oxw(3);return n.stopPropagation(),l.updateBrand(i,l.brandEdit)}),e.qZA(),e.TgZ(3,"button",28),e.NdJ("click",function(n){e.CHM(o);const i=e.oxw(5);return n.stopPropagation(),i.editableId=null}),e.qZA(),e.qZA()}if(2&d){const o=e.oxw(5);e.xp6(1),e.Q6J("loading",o.saving),e.xp6(1),e.Q6J("ngModel",o.brandEdit.brand),e.xp6(1),e.Q6J("loading",o.saving)}}function P(d,r){if(1&d){const o=e.EpF();e.TgZ(0,"div",18),e.TgZ(1,"div",3),e.YNc(2,V,3,1,"p",19),e.YNc(3,G,4,3,"div",20),e.qZA(),e.TgZ(4,"div",21),e.TgZ(5,"button",22),e.NdJ("click",function(n){e.CHM(o);const i=e.oxw().$implicit,l=e.oxw(3);return n.stopPropagation(),l.deleteBrand(i)}),e.qZA(),e.qZA(),e.qZA()}if(2&d){const o=e.oxw().$implicit,t=e.oxw(3);e.xp6(2),e.Q6J("ngIf",t.editableId!==o._id),e.xp6(1),e.Q6J("ngIf",t.editableId===o._id),e.xp6(2),e.Q6J("loading",t.saving)}}function R(d,r){if(1&d){const o=e.EpF();e.TgZ(0,"p",37),e.TgZ(1,"span",38),e.NdJ("click",function(){e.CHM(o);const n=e.oxw().$implicit,i=e.oxw(5);return i.editableId=n._id,i.modelEdit.model=n.model}),e._uU(2),e.qZA(),e.qZA()}if(2&d){const o=e.oxw().$implicit;e.xp6(2),e.hij(" ",o.model," ")}}function X(d,r){if(1&d){const o=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"button",26),e.NdJ("click",function(){e.CHM(o);const n=e.oxw().$implicit,i=e.oxw(5);return i.updateModel(n,i.modelEdit)}),e.qZA(),e.TgZ(2,"input",27),e.NdJ("ngModelChange",function(n){return e.CHM(o),e.oxw(6).modelEdit.model=n})("keydown.enter",function(){e.CHM(o);const n=e.oxw().$implicit,i=e.oxw(5);return i.updateModel(n,i.modelEdit)}),e.qZA(),e.TgZ(3,"button",28),e.NdJ("click",function(){return e.CHM(o),e.oxw(6).editableId=null}),e.qZA(),e.qZA()}if(2&d){const o=e.oxw(6);e.xp6(1),e.Q6J("loading",o.saving),e.xp6(1),e.Q6J("ngModel",o.modelEdit.model),e.xp6(1),e.Q6J("loading",o.saving)}}function z(d,r){if(1&d){const o=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",33),e.TgZ(2,"div",3),e.YNc(3,R,3,1,"p",34),e.YNc(4,X,4,3,"div",35),e.qZA(),e.TgZ(5,"div",36),e.TgZ(6,"button",22),e.NdJ("click",function(){const i=e.CHM(o).$implicit,l=e.oxw(2).$implicit;return e.oxw(3).deleteModel(i,l)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&d){const o=r.$implicit,t=e.oxw(5);e.xp6(3),e.Q6J("ngIf",t.editableId!==o._id),e.xp6(1),e.Q6J("ngIf",t.editableId===o._id),e.xp6(2),e.Q6J("loading",t.saving)}}const y=function(d){return{"ng-invalid ng-dirty":d}};function K(d,r){if(1&d){const o=e.EpF();e.TgZ(0,"p-panel",29),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.TgZ(3,"span",4),e.TgZ(4,"input",30),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw().index;return e.oxw(3).model[i].model=n})("focusin",function(){e.CHM(o);const n=e.oxw().index;return e.oxw(3).errorsModel[n]=null}),e.qZA(),e.TgZ(5,"label",31),e._uU(6,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"p-button",7),e.NdJ("onClick",function(){e.CHM(o);const n=e.oxw(),i=n.$implicit,l=n.index;return e.oxw(3).createModel(i,l)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",32),e.YNc(9,z,7,3,"div",15),e.ALo(10,"orderBy"),e.qZA()}if(2&d){const o=e.oxw(),t=o.index,n=o.$implicit,i=e.oxw(3);e.xp6(4),e.Q6J("ngModel",i.model[t].model)("ngClass",e.VKq(7,y,null==i.errorsModel[t]?null:i.errorsModel[t].model)),e.xp6(3),e.Q6J("loading",i.saving),e.xp6(2),e.Q6J("ngForOf",e.xi3(10,4,n.models,"model:string"))}}function L(d,r){1&d&&(e.TgZ(0,"p-accordionTab"),e.YNc(1,P,6,3,"ng-template",16),e.YNc(2,K,11,9,"ng-template",17),e.qZA())}function W(d,r){if(1&d&&(e.TgZ(0,"p-accordion",14),e.YNc(1,L,3,0,"p-accordionTab",15),e.qZA()),2&d){const o=e.oxw(2);e.Q6J("multiple",!o.folding),e.xp6(1),e.Q6J("ngForOf",o.carModels)}}function ee(d,r){if(1&d){const o=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"p-panel",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"span",4),e.TgZ(5,"input",5),e.NdJ("ngModelChange",function(n){return e.CHM(o),e.oxw().brand.brand=n})("focusin",function(){return e.CHM(o),e.oxw().errorsBrand=null}),e.qZA(),e.TgZ(6,"label",6),e._uU(7,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u043a\u0438"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"p-button",7),e.NdJ("onClick",function(){return e.CHM(o),e.oxw().createBrand()}),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,O,5,2,"div",8),e.YNc(10,W,2,2,"p-accordion",9),e.qZA()}if(2&d){const o=e.oxw();e.xp6(5),e.Q6J("ngModel",o.brand.brand)("ngClass",e.VKq(5,y,null==o.errorsBrand?null:o.errorsBrand.brand)),e.xp6(3),e.Q6J("loading",o.saving),e.xp6(1),e.Q6J("ngIf",null==o.carModels?null:o.carModels.length),e.xp6(1),e.Q6J("ngIf",o.carModels&&o.model)}}const h=class{constructor(r,o,t){c(this,"modelCarStateService"),c(this,"confirmDialogService"),c(this,"errorService"),c(this,"carModels"),c(this,"brand",new p),c(this,"errorsBrand"),c(this,"model"),c(this,"errorsModel"),c(this,"loading",!0),c(this,"saving",!1),c(this,"brandEdit",new p),c(this,"modelEdit",new _),c(this,"editableId"),c(this,"folding",!0),this.modelCarStateService=r,this.confirmDialogService=o,this.errorService=t}ngOnInit(){this.modelCarStateService.find().subscribe(r=>{this.carModels=r,this.model=this.carModels.map(()=>new _),this.errorsModel=this.carModels.map(()=>null),this.loading=!1}),this.folding=!localStorage.getItem("cms.car.models.folding")||JSON.parse(localStorage.getItem("cms.car.models.folding"))}createBrand(){this.saving=!0;const{valid:r,errors:o}=(0,x.G)(this.brand,p);r?(this.errorsBrand=null,this.modelCarStateService.createBrand(this.brand).subscribe(t=>{this.saving=!1,this.brand.brand=void 0,this.errorService.addSuccessMessage(`\u0411\u0440\u0435\u043d\u0434 ${t.brand} \u0441\u043e\u0437\u0434\u0430\u043d`),this.carModels.push(t),this.model.push(new _),this.errorsModel.push(null)},()=>this.saving=!1)):(console.error(o),this.errorsBrand=o,this.saving=!1,this.errorService.errorValues(this.errorsBrand))}createModel(r,o){this.saving=!0,this.model[o].brand=r;const{valid:t,errors:n}=(0,x.G)(this.model[o],_);t?(this.errorsModel[o]=null,this.modelCarStateService.createModel(this.model[o]).subscribe(i=>{this.saving=!1,this.model[o].model=void 0,r.models.push(i),this.errorService.addSuccessMessage(`\u041c\u043e\u0434\u0435\u043b\u044c ${i.model} \u0441\u043e\u0437\u0434\u0430\u043d\u0430`)},()=>this.saving=!1)):(console.error(n),this.errorsModel[o]=n,this.saving=!1,this.errorService.errorValues(this.errorsModel[o]))}updateBrand(r,o){this.saving=!0;const{valid:t,errors:n}=(0,x.G)(o,p);t?this.modelCarStateService.updateBrand(r._id,o).subscribe(i=>{this.saving=!1,this.errorService.addSuccessMessage(`\u0411\u0440\u0435\u043d\u0434 ${r.brand} \u0438\u0437\u043c\u0435\u043d\u0435\u043d \u043d\u0430 ${i.brand}`),r.brand=o.brand,this.editableId=null},()=>this.saving=!1):(console.error(n),this.saving=!1,this.errorService.errorValues(n))}updateModel(r,o){this.saving=!0,o.brand=r.brand;const{valid:t,errors:n}=(0,x.G)(o,_);t?this.modelCarStateService.updateModel(r._id,o).subscribe(i=>{this.saving=!1,this.errorService.addSuccessMessage(`\u041c\u043e\u0434\u0435\u043b\u044c ${r.model} \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430 \u043d\u0430 ${i.model}`),r.model=o.model,this.editableId=null},()=>this.saving=!1):(console.error(n),this.saving=!1,this.errorService.errorValues(n))}deleteBrand(r){this.confirmDialogService.confirm({message:`\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043c\u0430\u0440\u043a\u0443 "${r.brand}"?<br /><br />\u0412\u041d\u0418\u041c\u0410\u041d\u0418\u0415! \u0423 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0443\u0434\u0430\u043b\u044f\u0442\u0441\u044f \u0432\u0441\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u0441 \u0442\u0430\u043a\u043e\u0439 \u043c\u0430\u0440\u043a\u043e\u0439`,accept:()=>{this.saving=!0,this.modelCarStateService.deleteBrand(r._id).subscribe(()=>{this.saving=!1,this.errorService.addSuccessMessage(`\u0411\u0440\u0435\u043d\u0434 ${r.brand} \u0443\u0434\u0430\u043b\u0435\u043d`),this.carModels=this.carModels.filter(o=>r._id!==o._id)})}})}deleteModel(r,o){this.confirmDialogService.confirm({message:`\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c "${r.model}" \u043c\u0430\u0440\u043a\u0438 "${o.brand}"?<br /><br />\u0412\u041d\u0418\u041c\u0410\u041d\u0418\u0415! \u0423 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0443\u0434\u0430\u043b\u0438\u0442\u0441\u044f \u043c\u043e\u0434\u0435\u043b\u044c`,accept:()=>{this.saving=!0,this.modelCarStateService.deleteModel(r._id).subscribe(()=>{this.saving=!1,this.errorService.addSuccessMessage(`\u041c\u043e\u0434\u0435\u043b\u044c ${r.model} \u0443\u0434\u0430\u043b\u0435\u043d\u0430`),o.models=o.models.filter(t=>r._id!==t._id)})}})}setFolding(){localStorage.setItem("cms.car.models.folding",String(this.folding))}};let M=h;c(M,"\u0275fac",function(o){return new(o||h)(e.Y36(F.g),e.Y36(H.D),e.Y36(q.T))}),c(M,"\u0275cmp",e.Xpm({type:h,selectors:[["car-car-models"]],decls:2,vars:2,consts:[[4,"ngIf"],["header","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0440\u043a\u0443"],[1,"grid","align-items-center","m-0","p-0"],[1,"col"],[1,"p-float-label"],["id","float-input-firm","type","text","pInputText","",1,"w-full",3,"ngModel","ngClass","ngModelChange","focusin"],["for","float-input-firm"],["label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c","icon","pi pi-check","styleClass","p-button-success col-fixed",3,"loading","onClick"],["class","flex justify-content-end mt-3",4,"ngIf"],["styleClass","mt-3",3,"multiple",4,"ngIf"],[1,"flex","justify-content-end","mt-3"],[1,"p-field-checkbox"],["binary","true","inputId","folding",3,"ngModel","ngModelChange","onChange"],[1,"ml-2",3,"for"],["styleClass","mt-3",3,"multiple"],[4,"ngFor","ngForOf"],["pTemplate","header"],["pTemplate","content"],[1,"grid","align-items-center","w-full","my-0"],["class","fw-bold my-0",4,"ngIf"],["class","p-inputgroup",3,"click",4,"ngIf"],[1,"col-fixed","py-0"],["pButton","","pRipple","","type","button","label","\u0423\u0434\u0430\u043b\u0438\u0442\u044c",1,"p-button-outlined","p-button-danger","ml-2",3,"loading","click"],[1,"fw-bold","my-0"],[1,"hover:text-blue-400",3,"click"],[1,"p-inputgroup",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-check",1,"p-button-success",3,"loading","click"],["type","text","pInputText","",3,"ngModel","ngModelChange","keydown.enter"],["type","button","pButton","","pRipple","","icon","pi pi-times",1,"p-button-danger",3,"loading","click"],["header","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c"],["id","float-input-model","type","text","pInputText","",1,"w-full",3,"ngModel","ngClass","ngModelChange","focusin"],["for","float-input-model"],[1,"mt-4"],[1,"grid","align-items-center"],["class","fw-bold ml-2",4,"ngIf"],["class","p-inputgroup",4,"ngIf"],[1,"col-fixed"],[1,"fw-bold","ml-2"],[1,"hover:text-blue-400","cursor-pointer",3,"click"],[1,"p-inputgroup"]],template:function(o,t){1&o&&(e.YNc(0,j,1,0,"car-spinner",0),e.YNc(1,ee,11,7,"div",0)),2&o&&(e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading))},directives:[C.O5,D.O,A.s,f.Fj,S.o,f.JJ,f.On,C.mk,Z.zx,I.XZ,b.UQ,C.sg,b.US,Y.jx,Z.Hq,J.H],pipes:[U.d],encapsulation:2}));const oe=[{path:"",component:M,data:{title:"\u041f\u0430\u043d\u0435\u043b\u044c \u0430\u0432\u0442\u043e\u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430 - CMS"}}],T=class{};let v=T;c(v,"\u0275fac",function(o){return new(o||T)}),c(v,"\u0275mod",e.oAB({type:T})),c(v,"\u0275inj",e.cJS({imports:[[C.ez,E.Bz.forChild(oe),A.Q,S.j,f.u5,Z.hJ,N.G,b.fx,J.T,I.nD,Q.U$]]}))}}]);