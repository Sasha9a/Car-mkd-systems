{"version":3,"file":"main.js","mappings":"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","sources":["webpack://car-mkd-systems-v2/./apps/api/src/app/app.module.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/core/decorators/role.decorator.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/core/guards/jwt-auth.guard.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/core/guards/role.guard.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/core/middlewares/logger.middleware.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/core/pipes/validate.object.id.pipes.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/auth/auth.module.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/auth/auth.service.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/auth/jwt.strategy.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/category/category.controller.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/category/category.module.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/category/category.service.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/file/file.controller.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/file/file.module.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/file/file.service.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/model-car/model.car.controller.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/model-car/model.car.module.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/model-car/model.car.service.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/product/product.controller.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/product/product.module.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/product/product.service.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/user/user.controller.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/user/user.module.ts","webpack://car-mkd-systems-v2/./apps/api/src/app/modules/user/user.service.ts","webpack://car-mkd-systems-v2/./apps/api/src/environments/environment.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/base.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/category/category.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/category/category.form.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/category/characteristic.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/category/characteristic.form.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/file.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/modelCar/brand.car.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/modelCar/brand.car.form.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/modelCar/model.car.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/modelCar/model.car.form.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/pagination.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/product/modification.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/product/product.form.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/product/product.query.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/user/user.form.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/dtos/user/user.session.dto.ts","webpack://car-mkd-systems-v2/./libs/shared/src/enums/role.enum.ts","webpack://car-mkd-systems-v2/./libs/shared/src/schemas/brand.car.schema.ts","webpack://car-mkd-systems-v2/./libs/shared/src/schemas/category.schema.ts","webpack://car-mkd-systems-v2/./libs/shared/src/schemas/characteristic.schema.ts","webpack://car-mkd-systems-v2/./libs/shared/src/schemas/file.schema.ts","webpack://car-mkd-systems-v2/./libs/shared/src/schemas/model.car.schema.ts","webpack://car-mkd-systems-v2/./libs/shared/src/schemas/product.schema.ts","webpack://car-mkd-systems-v2/./libs/shared/src/schemas/user.schema.ts","webpack://car-mkd-systems-v2/external commonjs \"@nestjs/common\"","webpack://car-mkd-systems-v2/external commonjs \"@nestjs/core\"","webpack://car-mkd-systems-v2/external commonjs \"@nestjs/jwt\"","webpack://car-mkd-systems-v2/external commonjs \"@nestjs/mongoose\"","webpack://car-mkd-systems-v2/external commonjs \"@nestjs/passport\"","webpack://car-mkd-systems-v2/external commonjs \"@nestjs/platform-express\"","webpack://car-mkd-systems-v2/external commonjs \"bcrypt\"","webpack://car-mkd-systems-v2/external commonjs \"class-transformer\"","webpack://car-mkd-systems-v2/external commonjs \"class-validator\"","webpack://car-mkd-systems-v2/external commonjs \"express\"","webpack://car-mkd-systems-v2/external commonjs \"moment-timezone\"","webpack://car-mkd-systems-v2/external commonjs \"mongoose\"","webpack://car-mkd-systems-v2/external commonjs \"mongoose-query-parser\"","webpack://car-mkd-systems-v2/external commonjs \"multer\"","webpack://car-mkd-systems-v2/external commonjs \"passport-jwt\"","webpack://car-mkd-systems-v2/external commonjs \"tslib\"","webpack://car-mkd-systems-v2/external commonjs \"uuid\"","webpack://car-mkd-systems-v2/external node-commonjs \"fs\"","webpack://car-mkd-systems-v2/external node-commonjs \"path\"","webpack://car-mkd-systems-v2/webpack/bootstrap","webpack://car-mkd-systems-v2/./apps/api/src/main.ts"],"sourcesContent":["import { LoggerMiddleware } from '@car-mkd-systems/api/core/middlewares/logger.middleware';\nimport { AuthModule } from '@car-mkd-systems/api/modules/auth/auth.module';\nimport { CategoryModule } from '@car-mkd-systems/api/modules/category/category.module';\nimport { FileModule } from '@car-mkd-systems/api/modules/file/file.module';\nimport { ModelCarModule } from '@car-mkd-systems/api/modules/model-car/model.car.module';\nimport { ProductModule } from '@car-mkd-systems/api/modules/product/product.module';\nimport { UserModule } from '@car-mkd-systems/api/modules/user/user.module';\nimport { forwardRef, MiddlewareConsumer, Module, NestModule, RequestMethod } from '@nestjs/common';\n\nimport { MongooseModule } from '@nestjs/mongoose';\nimport { environment } from '../environments/environment';\n\n@Module({\n  imports: [\n    MongooseModule.forRoot(environment.connection.db),\n    forwardRef(() => AuthModule),\n    UserModule,\n    ModelCarModule,\n    CategoryModule,\n    ProductModule,\n    FileModule\n  ],\n  controllers: [],\n  providers: []\n})\nexport class AppModule implements NestModule {\n  public configure(consumer: MiddlewareConsumer): any {\n    consumer.apply(LoggerMiddleware).forRoutes({\n      path: '*',\n      method: RequestMethod.ALL\n    });\n  }\n}\n","import { RoleEnum } from '@car-mkd-systems/shared/enums/role.enum';\nimport { SetMetadata } from '@nestjs/common';\n\nexport const ROLES_KEY = 'roles';\nexport const Roles = (...roles: RoleEnum[]) => SetMetadata(ROLES_KEY, roles);\n","import { Injectable } from '@nestjs/common';\r\nimport { AuthGuard } from '@nestjs/passport';\r\n\r\n@Injectable()\r\nexport class JwtAuthGuard extends AuthGuard('jwt') {}\r\n","import { ROLES_KEY } from '@car-mkd-systems/api/core/decorators/role.decorator';\nimport { UserService } from '@car-mkd-systems/api/modules/user/user.service';\nimport { RoleEnum } from '@car-mkd-systems/shared/enums/role.enum';\nimport { CanActivate, ExecutionContext, forwardRef, Inject, Injectable } from '@nestjs/common';\nimport { Reflector } from '@nestjs/core';\n\n@Injectable()\nexport class RoleGuard implements CanActivate {\n  public constructor(private readonly reflector: Reflector,\n                     @Inject(forwardRef(() => UserService))\n                     private readonly userService: UserService) {\n  }\n\n  public async canActivate(context: ExecutionContext): Promise<boolean> {\n    const requiredRoles = this.reflector.getAllAndOverride<RoleEnum[]>(ROLES_KEY, [\n      context.getHandler(),\n      context.getClass()\n    ]);\n    if (!requiredRoles) {\n      return true;\n    }\n    const { user } = context.switchToHttp().getRequest();\n    if (!user) {\n      return false;\n    }\n    const verifyUser = await this.userService.findById(user._id);\n    if (!verifyUser) {\n      return false;\n    }\n    return requiredRoles.some((role) => verifyUser.roles?.includes(role));\n  }\n}\n","import { Injectable, NestMiddleware } from '@nestjs/common';\r\nimport { NextFunction, Request, Response } from 'express';\r\nimport * as moment from 'moment-timezone';\r\n\r\n@Injectable()\r\nexport class LoggerMiddleware implements NestMiddleware {\r\n  public use(req: Request, res: Response, next: NextFunction): any {\r\n    let result = `[${moment().format('HH:mm:ss DD.MM.YYYY')}][${req.method} ${req.url} ${JSON.stringify(req.query)}]`;\r\n    result = result.concat(` ${JSON.stringify(req.body)}`);\r\n    console.log(result);\r\n    next();\r\n  }\r\n}\r\n","import { BadRequestException, Injectable, PipeTransform } from '@nestjs/common';\nimport * as mongoose from 'mongoose';\n\n@Injectable()\nexport class ValidateObjectId implements PipeTransform<string> {\n  public async transform(value: string) {\n    const isValid = mongoose.Types.ObjectId.isValid(value);\n    if (!isValid) throw new BadRequestException('Invalid ID!');\n    return value;\n  }\n}\n","import { JwtAuthGuard } from '@car-mkd-systems/api/core/guards/jwt-auth.guard';\nimport { RoleGuard } from '@car-mkd-systems/api/core/guards/role.guard';\nimport { AuthService } from '@car-mkd-systems/api/modules/auth/auth.service';\nimport { JwtStrategy } from '@car-mkd-systems/api/modules/auth/jwt.strategy';\nimport { UserModule } from '@car-mkd-systems/api/modules/user/user.module';\nimport { forwardRef, Module } from '@nestjs/common';\nimport { PassportModule } from '@nestjs/passport';\nimport { JwtModule } from '@nestjs/jwt';\nimport {environment} from \"../../../environments/environment\";\n\n@Module({\n  imports: [\n    forwardRef(() => UserModule),\n    PassportModule.register({\n      defaultStrategy: 'jwt',\n      property: 'user',\n      session: true\n    }),\n    JwtModule.register({\n      secret: environment.connection.secret,\n      signOptions: {\n        expiresIn: environment.connection.expiresIn\n      }\n    })\n  ],\n  providers: [AuthService, JwtStrategy, JwtAuthGuard, RoleGuard],\n  exports: [AuthService]\n})\nexport class AuthModule {}\n","import { Injectable } from '@nestjs/common';\nimport { JwtService } from '@nestjs/jwt';\nimport { User } from '@car-mkd-systems/shared/schemas/user.schema';\n\n@Injectable()\nexport class AuthService {\n  public constructor(private readonly jwtService: JwtService) {\n  }\n\n  public async login(user: User) {\n    const payload = { user: { _id: user._id, login: user.login, roles: user.roles } };\n    return {\n      accessToken: this.jwtService.sign(payload)\n    }\n  }\n}\n","import { Injectable } from '@nestjs/common';\nimport { PassportStrategy } from '@nestjs/passport';\nimport { ExtractJwt, Strategy } from 'passport-jwt';\nimport { environment } from '../../../environments/environment';\n\n@Injectable()\nexport class JwtStrategy extends PassportStrategy(Strategy) {\n  public constructor() {\n    super({\n      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n      ignoreExpiration: false,\n      secretOrKey: environment.connection.secret,\n    });\n  }\n\n  public async validate(payload: any) {\n    return payload.user;\n  }\n}\n","import { Roles } from '@car-mkd-systems/api/core/decorators/role.decorator';\nimport { JwtAuthGuard } from '@car-mkd-systems/api/core/guards/jwt-auth.guard';\nimport { RoleGuard } from '@car-mkd-systems/api/core/guards/role.guard';\nimport { ValidateObjectId } from '@car-mkd-systems/api/core/pipes/validate.object.id.pipes';\nimport { CategoryService } from '@car-mkd-systems/api/modules/category/category.service';\nimport { ProductService } from '@car-mkd-systems/api/modules/product/product.service';\nimport { CategoryFormDto } from '@car-mkd-systems/shared/dtos/category/category.form.dto';\nimport { CharacteristicDto } from '@car-mkd-systems/shared/dtos/category/characteristic.dto';\nimport { CharacteristicFormDto } from '@car-mkd-systems/shared/dtos/category/characteristic.form.dto';\nimport { RoleEnum } from '@car-mkd-systems/shared/enums/role.enum';\nimport { Body, Controller, Delete, Get, HttpStatus, NotFoundException, Param, Post, Put, Res, UseGuards } from '@nestjs/common';\nimport { Response } from 'express';\n\n@Controller('category')\nexport class CategoryController {\n  public constructor(private readonly categoryService: CategoryService,\n                     private readonly productService: ProductService) {\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Get()\n  public async getAll(@Res() res: Response) {\n    const category = await this.categoryService.findAll();\n    return res.status(HttpStatus.OK).json(category).end();\n  }\n\n  @Get('/all')\n  public async getAllDropdown(@Res() res: Response) {\n    const category = await this.categoryService.findAllDropdown();\n    return res.status(HttpStatus.OK).json(category).end();\n  }\n\n  @Get('/:id')\n  public async getCategory(@Res() res: Response, @Param('id', new ValidateObjectId()) id: string) {\n    const category = await this.categoryService.findCategory(id);\n    if (!category) {\n      return res.status(HttpStatus.NOT_FOUND).send(\"Категория не существует\").end();\n    }\n    return res.status(HttpStatus.OK).json(category).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Post('/characteristic')\n  public async createCharacteristic(@Res() res: Response, @Body() body: CharacteristicFormDto) {\n    const category = await this.categoryService.checkCategory(body.category._id);\n    if (!category) {\n      return res.status(HttpStatus.NOT_FOUND).json({ category: \"Категория не существует\" }).end();\n    }\n    const createdCharacteristic = await this.categoryService.createCharacteristic(body);\n    await this.categoryService.addCharacteristicToCategory(createdCharacteristic);\n    return res.status(HttpStatus.CREATED).json(createdCharacteristic).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Post()\n  public async createCategory(@Res() res: Response, @Body() body: CategoryFormDto) {\n    const createdCategory = await this.categoryService.createCategory(body);\n    return res.status(HttpStatus.CREATED).json(createdCategory).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Put('/:id')\n  public async updateCategory(@Res() res: Response, @Param('id', new ValidateObjectId()) id: string, @Body() body: CategoryFormDto) {\n    const updatedCategory = await this.categoryService.updateCategory(id, body);\n    if (!updatedCategory) {\n      throw new NotFoundException(\"Нет такого объекта!\");\n    }\n    return res.status(HttpStatus.OK).json(updatedCategory).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Put('/characteristic/object/:id')\n  public async updateCharacteristic(@Res() res: Response, @Param('id', new ValidateObjectId()) id: string, @Body() body: CharacteristicFormDto) {\n    const updatedCharacteristic = await this.categoryService.updateCharacteristic(id, body);\n    if (!updatedCharacteristic) {\n      throw new NotFoundException(\"Нет такого объекта!\");\n    }\n    return res.status(HttpStatus.OK).json(updatedCharacteristic).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Put('/characteristic/order')\n  public async updateOrderCharacteristics(@Res() res: Response, @Body() body: CharacteristicDto[]) {\n    await this.categoryService.updateOrderCharacteristics(body);\n    return res.status(HttpStatus.OK).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Delete('/:id')\n  public async deleteCategory(@Res() res: Response, @Param('id', new ValidateObjectId()) id: string) {\n    const deletedCategory = await this.categoryService.deleteCategory(id);\n    if (!deletedCategory) {\n      throw new NotFoundException(\"Нет такого объекта!\");\n    }\n    await this.productService.isPublicToFalse(deletedCategory);\n    return res.status(HttpStatus.OK).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Delete('/characteristic/:id')\n  public async deleteCharacteristic(@Res() res: Response, @Param('id', new ValidateObjectId()) id: string) {\n    const deletedCharacteristic = await this.categoryService.deleteCharacteristic(id);\n    if (!deletedCharacteristic) {\n      throw new NotFoundException(\"Нет такого объекта!\");\n    }\n    return res.status(HttpStatus.OK).end();\n  }\n}\n","import { CategoryController } from '@car-mkd-systems/api/modules/category/category.controller';\nimport { CategoryService } from '@car-mkd-systems/api/modules/category/category.service';\nimport { ProductModule } from '@car-mkd-systems/api/modules/product/product.module';\nimport { UserModule } from '@car-mkd-systems/api/modules/user/user.module';\nimport { Category, CategorySchema } from '@car-mkd-systems/shared/schemas/category.schema';\nimport { Characteristic, CharacteristicSchema } from '@car-mkd-systems/shared/schemas/characteristic.schema';\nimport { Module } from '@nestjs/common';\nimport { MongooseModule } from '@nestjs/mongoose';\n\n@Module({\n  imports: [\n    MongooseModule.forFeature([{ name: Category.name, schema: CategorySchema }, { name: Characteristic.name, schema: CharacteristicSchema }]),\n    UserModule,\n    ProductModule\n  ],\n  controllers: [CategoryController],\n  providers: [CategoryService]\n})\nexport class CategoryModule {}\n","import { CategoryDto } from '@car-mkd-systems/shared/dtos/category/category.dto';\nimport { CategoryFormDto } from '@car-mkd-systems/shared/dtos/category/category.form.dto';\nimport { CharacteristicDto } from '@car-mkd-systems/shared/dtos/category/characteristic.dto';\nimport { CharacteristicFormDto } from '@car-mkd-systems/shared/dtos/category/characteristic.form.dto';\nimport { Category } from '@car-mkd-systems/shared/schemas/category.schema';\nimport { Characteristic } from '@car-mkd-systems/shared/schemas/characteristic.schema';\nimport { Injectable } from '@nestjs/common';\nimport { InjectModel } from '@nestjs/mongoose';\nimport { Model } from 'mongoose';\n\n@Injectable()\nexport class CategoryService {\n  public constructor(@InjectModel(Category.name) private readonly categoryModel: Model<Category>,\n                     @InjectModel(Characteristic.name) private readonly characteristicModel: Model<Characteristic>) {\n  }\n\n  public async findAll(): Promise<CategoryDto[]> {\n    return await this.categoryModel.find().sort({ name: 1 }).populate('characteristics').exec();\n  }\n\n  public async findAllDropdown(): Promise<CategoryDto[]> {\n    return await this.categoryModel.find({}, 'name').sort({ name: 1 }).exec();\n  }\n\n  public async findCategory(id: string): Promise<CategoryDto> {\n    return await this.categoryModel.findById(id).populate('characteristics').exec();\n  }\n\n  public async checkCategory(id: string): Promise<boolean> {\n    return await this.categoryModel.exists({ _id: id });\n  }\n\n  public async createCategory(category: CategoryFormDto): Promise<CategoryDto> {\n    const createdCategory = await new this.categoryModel(category);\n    return await createdCategory.save();\n  }\n\n  public async createCharacteristic(characteristic: CharacteristicFormDto): Promise<CharacteristicDto> {\n    const createdCharacteristic = await new this.characteristicModel(characteristic);\n    return await createdCharacteristic.save();\n  }\n\n  public async addCharacteristicToCategory(characteristic: CharacteristicDto): Promise<any> {\n    return await this.categoryModel.updateOne({ _id: characteristic.category._id }, { $push: { characteristics: characteristic._id } }).exec();\n  }\n\n  public async updateCategory(id: string, category: CategoryFormDto): Promise<CategoryDto> {\n    return await this.categoryModel.findOneAndUpdate({ _id: id }, { $set: category }, {new: true}).exec();\n  }\n\n  public async updateCharacteristic(id: string, characteristic: CharacteristicFormDto): Promise<CharacteristicDto> {\n    return await this.characteristicModel.findOneAndUpdate({ _id: id }, { $set: characteristic }, {new: true}).exec();\n  }\n\n  public async updateOrderCharacteristics(characteristics: CharacteristicDto[]) {\n    for (const characteristic of characteristics) {\n      await this.characteristicModel.updateOne({ _id: characteristic._id }, { order: characteristic.order });\n    }\n  }\n\n  public async deleteCategory(id: string): Promise<Category> {\n    const category: CategoryDto = await this.categoryModel.findById(id);\n    if (!category) {\n      return null;\n    }\n    await this.characteristicModel.deleteMany({ _id: { $in: category.characteristics } });\n    return await this.categoryModel.findByIdAndDelete(id).exec();\n  }\n\n  public async deleteCharacteristic(id: string): Promise<any> {\n    return await this.characteristicModel.findByIdAndDelete(id).exec();\n  }\n}\n","import { Roles } from '@car-mkd-systems/api/core/decorators/role.decorator';\r\nimport { JwtAuthGuard } from '@car-mkd-systems/api/core/guards/jwt-auth.guard';\r\nimport { RoleGuard } from '@car-mkd-systems/api/core/guards/role.guard';\r\nimport { FileService } from '@car-mkd-systems/api/modules/file/file.service';\r\nimport { FileDto } from '@car-mkd-systems/shared/dtos/file.dto';\r\nimport { RoleEnum } from '@car-mkd-systems/shared/enums/role.enum';\r\nimport { Controller, Delete, Get, HttpStatus, NotFoundException, Param, Post, Res, UploadedFile, UseGuards, UseInterceptors } from '@nestjs/common';\r\nimport { FileInterceptor } from '@nestjs/platform-express';\r\nimport { Express, Response } from 'express';\r\nimport * as e from 'express/ts4.0';\r\nimport { diskStorage } from 'multer';\r\nimport * as uuid from 'uuid';\r\nimport { extname } from 'path'\r\nimport * as fs from 'fs';\r\n\r\n@Controller('file')\r\nexport class FileController {\r\n  public constructor(private readonly fileService: FileService) {\r\n  }\r\n\r\n  @Get(':path')\r\n  public async getFile(@Res() res: Response, @Param('path') path: string) {\r\n    return res.sendFile(path, { root: './public' });\r\n  }\r\n\r\n  @Roles(RoleEnum.ADMIN)\r\n  @UseGuards(JwtAuthGuard, RoleGuard)\r\n  @Post()\r\n  @UseInterceptors(FileInterceptor('file', {\r\n    storage: diskStorage({\r\n      destination: './public',\r\n      filename(req: e.Request, file: Express.Multer.File, callback: (error: (Error | null), filename: string) => void) {\r\n        callback(null, `${uuid.v4()}${extname(file.originalname)}`);\r\n      }\r\n    })\r\n  }))\r\n  public async upload(@Res() res: Response, @UploadedFile() file: Express.Multer.File) {\r\n    const newFile = <FileDto>{\r\n      name: file.originalname,\r\n      path: file.filename,\r\n      size: file.size,\r\n      mime: file.mimetype\r\n    };\r\n    const createdFile = await this.fileService.upload(newFile);\r\n    return res.status(HttpStatus.CREATED).json(createdFile).end();\r\n  }\r\n\r\n  @Roles(RoleEnum.ADMIN)\r\n  @UseGuards(JwtAuthGuard, RoleGuard)\r\n  @Delete(':path')\r\n  public async deleteFile(@Res() res: Response, @Param('path') path: string) {\r\n    const deletedFile = await this.fileService.deleteFile(path);\r\n    if (!deletedFile) {\r\n      throw new NotFoundException(\"Нет такого файла!\");\r\n    }\r\n    fs.unlinkSync('./public/' + path);\r\n    return res.status(HttpStatus.OK).end();\r\n  }\r\n}\r\n","import { FileController } from '@car-mkd-systems/api/modules/file/file.controller';\nimport { FileService } from '@car-mkd-systems/api/modules/file/file.service';\nimport { UserModule } from '@car-mkd-systems/api/modules/user/user.module';\nimport { File, FileSchema } from '@car-mkd-systems/shared/schemas/file.schema';\nimport { Module } from '@nestjs/common';\nimport { MongooseModule } from '@nestjs/mongoose';\n\n@Module({\n  imports: [\n    MongooseModule.forFeature([{name: File.name, schema: FileSchema}]),\n    UserModule\n  ],\n  controllers: [FileController],\n  providers: [FileService],\n  exports: [FileService]\n})\nexport class FileModule {}\n","import { FileDto } from '@car-mkd-systems/shared/dtos/file.dto';\r\nimport { File } from '@car-mkd-systems/shared/schemas/file.schema';\r\nimport { Injectable } from '@nestjs/common';\r\nimport { InjectModel } from '@nestjs/mongoose';\r\nimport { Model } from 'mongoose';\r\n\r\n@Injectable()\r\nexport class FileService {\r\n  public constructor(@InjectModel(File.name) private readonly fileModel: Model<File>) {\r\n  }\r\n\r\n  public async upload(file: FileDto): Promise<File> {\r\n    const uploadFile = await new this.fileModel(file);\r\n    return uploadFile.save();\r\n  }\r\n\r\n  public async deleteFile(path: string): Promise<any> {\r\n    return await this.fileModel.findOneAndDelete({ path: path }).exec();\r\n  }\r\n}\r\n","import { Roles } from '@car-mkd-systems/api/core/decorators/role.decorator';\nimport { JwtAuthGuard } from '@car-mkd-systems/api/core/guards/jwt-auth.guard';\nimport { RoleGuard } from '@car-mkd-systems/api/core/guards/role.guard';\nimport { ValidateObjectId } from '@car-mkd-systems/api/core/pipes/validate.object.id.pipes';\nimport { ModelCarService } from '@car-mkd-systems/api/modules/model-car/model.car.service';\nimport { BrandCarFormDto } from '@car-mkd-systems/shared/dtos/modelCar/brand.car.form.dto';\nimport { ModelCarFormDto } from '@car-mkd-systems/shared/dtos/modelCar/model.car.form.dto';\nimport { RoleEnum } from '@car-mkd-systems/shared/enums/role.enum';\nimport { Body, Controller, Delete, Get, HttpStatus, NotFoundException, Param, Post, Put, Res, UseGuards } from '@nestjs/common';\nimport { Response } from 'express';\n\n@Controller('car-model')\nexport class ModelCarController {\n  public constructor(private readonly modelCarService: ModelCarService) {\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Get()\n  public async getAll(@Res() res: Response) {\n    const carModels = await this.modelCarService.findAll();\n    return res.status(HttpStatus.OK).json(carModels).end();\n  }\n\n  @Get('/brand/all')\n  public async getAllBrandDropdown(@Res() res: Response) {\n    const brands = await this.modelCarService.findAllBrandDropdown();\n    return res.status(HttpStatus.OK).json(brands).end();\n  }\n\n  @Get('/model/all')\n  public async getAllModelDropdown(@Res() res: Response) {\n    const models = await this.modelCarService.findAllModelDropdown();\n    return res.status(HttpStatus.OK).json(models).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Post('/model')\n  public async createModel(@Res() res: Response, @Body() body: ModelCarFormDto) {\n    const firm = await this.modelCarService.checkBrand(body.brand._id);\n    if (!firm) {\n      return res.status(HttpStatus.NOT_FOUND).json(<ModelCarFormDto>{ model: \"Фирма не существует\" }).end();\n    }\n    const createdModel = await this.modelCarService.createModel(body);\n    await this.modelCarService.addModelToBrand(createdModel);\n    return res.status(HttpStatus.CREATED).json(createdModel).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Post('/brand')\n  public async createBrand(@Res() res: Response, @Body() body: BrandCarFormDto) {\n    const createdBrand = await this.modelCarService.createBrand(body);\n    return res.status(HttpStatus.CREATED).json(createdBrand).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Put('/brand/:id')\n  public async updateBrand(@Res() res: Response, @Param('id', new ValidateObjectId()) id: string, @Body() body: BrandCarFormDto) {\n    const updatedBrand = await this.modelCarService.updateBrand(id, body);\n    if (!updatedBrand) {\n      throw new NotFoundException(\"Нет такого объекта!\");\n    }\n    return res.status(HttpStatus.OK).json(updatedBrand).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Put('/model/:id')\n  public async updateModel(@Res() res: Response, @Param('id', new ValidateObjectId()) id: string, @Body() body: ModelCarFormDto) {\n    const updatedModel = await this.modelCarService.updateModel(id, body);\n    if (!updatedModel) {\n      throw new NotFoundException(\"Нет такого объекта!\");\n    }\n    return res.status(HttpStatus.OK).json(updatedModel).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Delete('/brand/:id')\n  public async deleteBrand(@Res() res: Response, @Param('id', new ValidateObjectId()) id: string) {\n    const deletedBrand = await this.modelCarService.deleteBrand(id);\n    if (!deletedBrand) {\n      throw new NotFoundException(\"Нет такого объекта!\");\n    }\n    return res.status(HttpStatus.OK).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Delete('/model/:id')\n  public async deleteModel(@Res() res: Response, @Param('id', new ValidateObjectId()) id: string) {\n    const deletedModel = await this.modelCarService.deleteModel(id);\n    if (!deletedModel) {\n      throw new NotFoundException(\"Нет такого объекта!\");\n    }\n    return res.status(HttpStatus.OK).end();\n  }\n\n}\n","import { ModelCarController } from '@car-mkd-systems/api/modules/model-car/model.car.controller';\nimport { ModelCarService } from '@car-mkd-systems/api/modules/model-car/model.car.service';\nimport { UserModule } from '@car-mkd-systems/api/modules/user/user.module';\nimport { BrandCar, BrandCarSchema } from '@car-mkd-systems/shared/schemas/brand.car.schema';\nimport { ModelCar, ModelCarSchema } from '@car-mkd-systems/shared/schemas/model.car.schema';\nimport { Module } from '@nestjs/common';\nimport { MongooseModule } from '@nestjs/mongoose';\n\n@Module({\n  imports: [\n    MongooseModule.forFeature([{name: ModelCar.name, schema: ModelCarSchema}, {name: BrandCar.name, schema: BrandCarSchema}]),\n    UserModule\n  ],\n  controllers: [ModelCarController],\n  providers: [ModelCarService]\n})\nexport class ModelCarModule {}\n","import { BrandCarDto } from '@car-mkd-systems/shared/dtos/modelCar/brand.car.dto';\nimport { BrandCarFormDto } from '@car-mkd-systems/shared/dtos/modelCar/brand.car.form.dto';\nimport { ModelCarDto } from '@car-mkd-systems/shared/dtos/modelCar/model.car.dto';\nimport { ModelCarFormDto } from '@car-mkd-systems/shared/dtos/modelCar/model.car.form.dto';\nimport { BrandCar } from '@car-mkd-systems/shared/schemas/brand.car.schema';\nimport { ModelCar } from '@car-mkd-systems/shared/schemas/model.car.schema';\nimport { Injectable } from '@nestjs/common';\nimport { InjectModel } from '@nestjs/mongoose';\nimport { Model } from 'mongoose';\n\n@Injectable()\nexport class ModelCarService {\n  public constructor(@InjectModel(ModelCar.name) private readonly modelCarModel: Model<ModelCar>,\n                     @InjectModel(BrandCar.name) private readonly brandCarModel: Model<BrandCar>) {\n  }\n\n  public async findAll(): Promise<BrandCarDto[]> {\n    return await this.brandCarModel.find().sort({ brand: 1 }).populate('models').exec();\n  }\n\n  public async findAllBrandDropdown(): Promise<BrandCarDto[]> {\n    return await this.brandCarModel.find({}, 'brand').sort({ brand: 1 }).exec();\n  }\n\n  public async findAllModelDropdown(): Promise<ModelCarDto[]> {\n    return await this.modelCarModel.find().sort({ model: 1 }).populate('brand', { brand: 1, _id: 0 }).exec();\n  }\n\n  public async checkBrand(id: string): Promise<boolean> {\n    return await this.brandCarModel.exists({ _id: id });\n  }\n\n  public async createBrand(brand: BrandCarFormDto): Promise<BrandCarDto> {\n    const createdBrand = await new this.brandCarModel(brand);\n    return await createdBrand.save();\n  }\n\n  public async createModel(model: ModelCarFormDto): Promise<ModelCarDto> {\n    const createdModel = await new this.modelCarModel(model);\n    return await createdModel.save();\n  }\n\n  public async addModelToBrand(model: ModelCarDto): Promise<any> {\n    return await this.brandCarModel.updateOne({ _id: model.brand._id }, { $push: { models: model._id } }).exec();\n  }\n\n  public async updateBrand(id: string, brand: BrandCarFormDto): Promise<BrandCarDto> {\n    return await this.brandCarModel.findOneAndUpdate({ _id: id }, { $set: brand }, { new: true }).exec();\n  }\n\n  public async updateModel(id: string, model: ModelCarFormDto): Promise<ModelCarDto> {\n    return await this.modelCarModel.findOneAndUpdate({ _id: id }, { $set: model }, { new: true }).exec();\n  }\n\n  public async deleteBrand(id: string): Promise<BrandCar> {\n    const brand: BrandCarDto = await this.brandCarModel.findById(id);\n    if (!brand) {\n      return null;\n    }\n    await this.modelCarModel.deleteMany({ _id: { $in: brand.models } });\n    return await this.brandCarModel.findByIdAndDelete(id).exec();\n  }\n\n  public async deleteModel(id: string): Promise<ModelCar> {\n    return await this.modelCarModel.findByIdAndDelete(id).exec();\n  }\n\n}\n","import { Roles } from '@car-mkd-systems/api/core/decorators/role.decorator';\nimport { JwtAuthGuard } from '@car-mkd-systems/api/core/guards/jwt-auth.guard';\nimport { RoleGuard } from '@car-mkd-systems/api/core/guards/role.guard';\nimport { ValidateObjectId } from '@car-mkd-systems/api/core/pipes/validate.object.id.pipes';\nimport { FileService } from '@car-mkd-systems/api/modules/file/file.service';\nimport { ProductService } from '@car-mkd-systems/api/modules/product/product.service';\nimport { UserService } from '@car-mkd-systems/api/modules/user/user.service';\nimport { ProductFormDto } from '@car-mkd-systems/shared/dtos/product/product.form.dto';\nimport { ProductItemDto } from '@car-mkd-systems/shared/dtos/product/product.item.dto';\nimport { ProductQueryDto } from '@car-mkd-systems/shared/dtos/product/product.query.dto';\nimport { RoleEnum } from '@car-mkd-systems/shared/enums/role.enum';\nimport { Body, Controller, Delete, Get, HttpStatus, NotFoundException, Param, Post, Put, Query, Req, Res, UseGuards } from '@nestjs/common';\nimport { Request, Response } from 'express';\nimport * as fs from 'fs';\n\n@Controller('product')\nexport class ProductController {\n  public constructor(private readonly productService: ProductService,\n                     private readonly userService: UserService,\n                     private readonly fileService: FileService) {\n  }\n\n  @Get()\n  public async findAll(@Res() res: Response, @Req() req: Request, @Query() query: ProductQueryDto) {\n    const user = req.headers.authorization ? await this.userService.findByToken(req.headers.authorization.replace(\"Bearer \", \"\")) : null;\n    const products = await this.productService.findAll(query, user);\n    if (!user) {\n      products.forEach((product) => {\n        product.modifications.forEach((modification) => {\n          delete modification.pricePartner;\n          delete modification.discountPartner;\n        });\n      });\n    }\n    const count = await this.productService.countFindAll(query, user);\n    return res.status(HttpStatus.OK).json(<ProductItemDto>{\n      items: products as any[],\n      count: count\n    }).end();\n  }\n\n  @Get(':id')\n  public async findById(@Res() res: Response, @Req() req: Request, @Param('id', new ValidateObjectId()) id: string) {\n    const product = await this.productService.findById(id);\n    if (!product) {\n      return res.status(HttpStatus.NOT_FOUND).send(\"Товар не существует\").end();\n    }\n    const user = req.headers.authorization ? await this.userService.findByToken(req.headers.authorization.replace(\"Bearer \", \"\")) : null;\n    if ((!user || !user.roles?.includes(RoleEnum.ADMIN)) && !product.isPublic) {\n      return res.status(HttpStatus.NOT_FOUND).send(\"Ошибка доступа\").end();\n    }\n    if (!user) {\n      product.modifications.forEach((modification) => {\n        delete modification.pricePartner;\n        delete modification.discountPartner;\n      });\n    }\n    return res.status(HttpStatus.OK).json(product).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Post()\n  public async createProduct(@Res() res: Response, @Body() body: ProductFormDto) {\n    const createdProduct = await this.productService.createProduct(body);\n    if (!createdProduct) {\n      throw new NotFoundException(\"Произошла ошибка!\");\n    }\n    return res.status(HttpStatus.CREATED).json(createdProduct).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Put(':id')\n  public async updateProduct(@Res() res: Response, @Param('id', new ValidateObjectId()) id: string, @Body() body: ProductFormDto) {\n    const updatedProduct = await this.productService.updateProduct(id, body);\n    if (!updatedProduct) {\n      throw new NotFoundException(\"Нет такого товара!\");\n    }\n    return res.status(HttpStatus.OK).json(updatedProduct).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Delete(':id')\n  public async deleteProduct(@Res() res: Response, @Param('id', new ValidateObjectId()) id: string) {\n    const deletedProduct = await this.productService.deleteProduct(id);\n    if (!deletedProduct) {\n      throw new NotFoundException(\"Нет такого объекта!\");\n    }\n    for (const image of deletedProduct.images) {\n      await this.fileService.deleteFile(image.path);\n      fs.unlinkSync('./public/' + image.path);\n    }\n    return res.status(HttpStatus.OK).end();\n  }\n}\n","import { FileModule } from '@car-mkd-systems/api/modules/file/file.module';\nimport { ProductController } from '@car-mkd-systems/api/modules/product/product.controller';\nimport { ProductService } from '@car-mkd-systems/api/modules/product/product.service';\nimport { UserModule } from '@car-mkd-systems/api/modules/user/user.module';\nimport { Product, ProductSchema } from '@car-mkd-systems/shared/schemas/product.schema';\nimport { Module } from '@nestjs/common';\nimport { MongooseModule } from '@nestjs/mongoose';\n\n@Module({\n  imports: [\n    MongooseModule.forFeature([{ name: Product.name, schema: ProductSchema }]),\n    UserModule,\n    FileModule\n  ],\n  controllers: [ProductController],\n  providers: [ProductService],\n  exports: [ProductService]\n})\nexport class ProductModule {}\n","import { ProductFormDto } from '@car-mkd-systems/shared/dtos/product/product.form.dto';\nimport { ProductQueryDto } from '@car-mkd-systems/shared/dtos/product/product.query.dto';\nimport { RoleEnum } from '@car-mkd-systems/shared/enums/role.enum';\nimport { Category } from '@car-mkd-systems/shared/schemas/category.schema';\nimport { Product } from '@car-mkd-systems/shared/schemas/product.schema';\nimport { User } from '@car-mkd-systems/shared/schemas/user.schema';\nimport { Injectable } from '@nestjs/common';\nimport { InjectModel } from '@nestjs/mongoose';\nimport { Model } from 'mongoose';\nimport { MongooseQueryParser } from 'mongoose-query-parser';\n\n@Injectable()\nexport class ProductService {\n  public constructor(@InjectModel(Product.name) private readonly productModel: Model<Product>) {\n  }\n\n  public async findAll(queryParams: ProductQueryDto, user: User): Promise<Product[]> {\n    const parser = new MongooseQueryParser({\n      skipKey: 'offset',\n      limitKey: 'limit'\n    });\n    const filter = parser.parse(queryParams);\n    if (!user || !user.roles?.includes(RoleEnum.ADMIN)) {\n      filter.filter.isPublic = true;\n    }\n    return await this.productModel.find(filter.filter)\n                     .skip(filter.skip)\n                     .limit(filter.limit)\n                     .populate('images').exec();\n  }\n\n  public async countFindAll(queryParams: ProductQueryDto, user: User) {\n    const parser = new MongooseQueryParser({\n      skipKey: 'offset',\n      limitKey: 'limit'\n    });\n    const filter = parser.parse(queryParams);\n    if (!user || !user.roles?.includes(RoleEnum.ADMIN)) {\n      filter.filter.isPublic = true;\n    }\n    return await this.productModel.count(filter.filter).exec();\n  }\n\n  public async findById(id: string): Promise<Product> {\n    return await this.productModel.findById(id)\n                     .populate('category')\n                     .populate('images')\n                     .populate({ path: 'modelsCar', populate: { path: 'brand' } }).exec();\n  }\n\n  public async createProduct(product: ProductFormDto): Promise<Product> {\n    try {\n      const createdProduct = new this.productModel(product);\n      return await createdProduct.save();\n    } catch {\n      return null;\n    }\n  }\n\n  public async updateProduct(id: string, product: ProductFormDto): Promise<Product> {\n    return await this.productModel.findOneAndUpdate({ _id: id }, { $set: product }, { new: true }).exec();\n  }\n\n  public async deleteProduct(id: string): Promise<Product> {\n    return await this.productModel.findByIdAndDelete(id).exec();\n  }\n\n  public async isPublicToFalse(category: Category): Promise<any> {\n    return await this.productModel.updateMany({ category: category }, { $set: { isPublic: false } }).exec();\n  }\n\n}\n","import { Roles } from '@car-mkd-systems/api/core/decorators/role.decorator';\nimport { JwtAuthGuard } from '@car-mkd-systems/api/core/guards/jwt-auth.guard';\nimport { RoleGuard } from '@car-mkd-systems/api/core/guards/role.guard';\nimport { AuthService } from '@car-mkd-systems/api/modules/auth/auth.service';\nimport { UserSessionDto } from '@car-mkd-systems/shared/dtos/user/user.session.dto';\nimport { RoleEnum } from '@car-mkd-systems/shared/enums/role.enum';\nimport { Body, Controller, Get, HttpStatus, Post, Res, UseGuards } from '@nestjs/common';\nimport { UserService } from './user.service';\nimport { UserFormDto } from '@car-mkd-systems/shared/dtos/user/user.form.dto';\nimport { Response } from 'express';\nimport * as bcrypt from 'bcrypt';\n\n@Controller('user')\nexport class UserController {\n  public constructor(private readonly userService: UserService,\n                     private readonly authService: AuthService) {\n  }\n\n  @Get()\n  public async getAll(@Res() res: Response) {\n    const users = await this.userService.findAll();\n    return res.status(HttpStatus.OK).json(users).end();\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @Get('/check')\n  public async check(@Res() res: Response) {\n    return res.status(HttpStatus.NO_CONTENT).end();\n  }\n\n  @Post('/get-pass')\n  public async getPassword(@Res() res: Response, @Body() password: string) {\n    password = bcrypt.hashSync(password, 10);\n    return res.status(HttpStatus.OK).json(password).end();\n  }\n\n  @Roles(RoleEnum.ADMIN)\n  @UseGuards(JwtAuthGuard, RoleGuard)\n  @Post()\n  public async addUser(@Res() res: Response, @Body() body: UserFormDto) {\n    body.password = bcrypt.hashSync(body.password, 10);\n    const newUser = await this.userService.create(body);\n    return res.status(HttpStatus.CREATED).json(newUser).end();\n  }\n\n  @Post('/login')\n  public async login(@Res() res: Response, @Body() body: UserFormDto) {\n    const user = await this.userService.findByLogin(body.login);\n    const errors: Record<keyof UserFormDto, any[]> = {\n      login: null,\n      password: null\n    };\n    if (!user) {\n      errors.login = ['Нет такого аккаунта'];\n      return res.status(HttpStatus.NOT_FOUND).json(errors).end();\n    }\n    if (bcrypt.compareSync(body.password, user.password)) {\n      const token = await this.authService.login(user);\n      const login: UserSessionDto = {\n        _id: user._id,\n        login: user.login,\n        token: token.accessToken,\n        roles: user.roles\n      }\n      await this.userService.setToken(user._id, token.accessToken);\n      return res.status(HttpStatus.OK).json(login).end();\n    } else {\n      errors.password = ['Неверный пароль'];\n      return res.status(HttpStatus.NOT_FOUND).json(errors).end();\n    }\n  }\n\n  @Post('/logout')\n  public async logout(@Res() res: Response, @Body() body: UserSessionDto) {\n    await this.userService.logout(body._id);\n    return res.status(HttpStatus.OK).end();\n  }\n\n}\n","import { AuthModule } from '@car-mkd-systems/api/modules/auth/auth.module';\nimport { forwardRef, Module } from '@nestjs/common';\nimport { MongooseModule } from '@nestjs/mongoose';\nimport { UserController } from './user.controller';\nimport { UserService } from './user.service';\nimport { User, UserSchema } from '@car-mkd-systems/shared/schemas/user.schema';\n\n@Module({\n  imports: [\n    MongooseModule.forFeature([{ name: User.name, schema: UserSchema }]),\n    forwardRef(() => AuthModule)\n  ],\n  controllers: [UserController],\n  providers: [UserService],\n  exports: [UserService]\n})\nexport class UserModule {}\n","import { Injectable } from '@nestjs/common';\nimport { InjectModel } from '@nestjs/mongoose';\nimport { User } from '@car-mkd-systems/shared/schemas/user.schema';\nimport { Model } from 'mongoose';\nimport { UserFormDto } from '@car-mkd-systems/shared/dtos/user/user.form.dto';\n\n@Injectable()\nexport class UserService {\n  public constructor(@InjectModel(User.name) private readonly userModel: Model<User>) {\n  }\n\n  public async create(user: UserFormDto): Promise<User> {\n    const createUser = await new this.userModel(user);\n    return createUser.save();\n  }\n\n  public async findAll(): Promise<User[]> {\n    return await this.userModel.find().exec();\n  }\n\n  public async findById(id: string): Promise<User> {\n    return await this.userModel.findById(id).exec();\n  }\n\n  public async findByLogin(login: string): Promise<User> {\n    return await this.userModel.findOne({ login: login }).exec();\n  }\n\n  public async findByToken(token: string): Promise<User> {\n    return await this.userModel.findOne({ token: token }).exec();\n  }\n\n  public async setToken(id: string, token: string): Promise<any> {\n    return await this.userModel.updateOne({ _id: id }, { $set: { token: token } }).exec();\n  }\n\n  public async logout(id: string): Promise<any> {\n    return await this.userModel.updateOne({ _id: id }, { $unset: { token: '' } }).exec();\n  }\n\n}\n","import { ConfigInterface } from '@car-mkd-systems/shared/interfaces/config.interface';\n\nexport const environment: ConfigInterface = {\n  production: false,\n  connection: {\n    secret: process.env.SECRET || 'd2103dfe7288ccb50a4a7af9ff90ec52',\n    db: process.env.DB || 'mongodb://localhost:27017/car',\n    expiresIn: Number(process.env.EXPIRES_IN) || 2592000\n  }\n};\n\n","import { Expose } from 'class-transformer';\r\nimport { IsOptional } from 'class-validator';\r\n\r\n@Expose()\r\nexport class BaseDto {\r\n  @Expose()\r\n  @IsOptional()\r\n  public _id?: string;\r\n}\r\n","import { BaseDto } from '@car-mkd-systems/shared/dtos/base.dto';\nimport { CharacteristicDto } from '@car-mkd-systems/shared/dtos/category/characteristic.dto';\nimport { Expose, Type } from 'class-transformer';\n\n@Expose()\nexport class CategoryDto extends BaseDto {\n  @Expose()\n  public name: string;\n\n  @Expose()\n  @Type(() => CharacteristicDto)\n  public characteristics?: CharacteristicDto[];\n}\n","import { Expose } from 'class-transformer';\nimport { IsString } from 'class-validator';\n\n@Expose()\nexport class CategoryFormDto {\n  @Expose()\n  @IsString({ message: \"Введите значение\" })\n  public name: string;\n}\n","import { BaseDto } from '@car-mkd-systems/shared/dtos/base.dto';\nimport { CategoryDto } from '@car-mkd-systems/shared/dtos/category/category.dto';\nimport { Expose, Type } from 'class-transformer';\n\n@Expose()\nexport class CharacteristicDto extends BaseDto {\n  @Expose()\n  public name: string;\n\n  @Expose()\n  public order: number;\n\n  @Expose()\n  @Type(() => CategoryDto)\n  public category: CategoryDto;\n}\n","import { CategoryDto } from '@car-mkd-systems/shared/dtos/category/category.dto';\nimport { Expose, Type } from 'class-transformer';\nimport { IsDefined, IsString } from 'class-validator';\n\n@Expose()\nexport class CharacteristicFormDto {\n  @Expose()\n  @IsString({ message: \"Введите значение\" })\n  public name: string;\n\n  @Expose()\n  @IsDefined({ message: \"Введите значение\" })\n  public order: number;\n\n  @Expose()\n  @IsDefined({ message: \"Не выбрана категория\" })\n  @Type(() => CategoryDto)\n  public category: CategoryDto;\n}\n","import { BaseDto } from '@car-mkd-systems/shared/dtos/base.dto';\r\nimport { Expose } from 'class-transformer';\r\n\r\n@Expose()\r\nexport class FileDto extends BaseDto {\r\n  @Expose()\r\n  public path: string;\r\n\r\n  @Expose()\r\n  public name: string;\r\n\r\n  @Expose()\r\n  public mime: string;\r\n\r\n  @Expose()\r\n  public size: number;\r\n}\r\n","import { BaseDto } from '@car-mkd-systems/shared/dtos/base.dto';\nimport { Expose, Type } from 'class-transformer';\nimport { ModelCarDto } from '@car-mkd-systems/shared/dtos/modelCar/model.car.dto';\n\n@Expose()\nexport class BrandCarDto extends BaseDto {\n  @Expose()\n  public brand: string;\n\n  @Expose()\n  @Type(() => ModelCarDto)\n  public models?: ModelCarDto[];\n}\n","import { Expose } from 'class-transformer';\nimport { IsString } from 'class-validator';\n\n@Expose()\nexport class BrandCarFormDto {\n  @Expose()\n  @IsString({ message: \"Введите значение\" })\n  public brand: string;\n}\n","import { BaseDto } from '@car-mkd-systems/shared/dtos/base.dto';\nimport { BrandCarDto } from '@car-mkd-systems/shared/dtos/modelCar/brand.car.dto';\nimport { Expose, Type } from 'class-transformer';\n\n@Expose()\nexport class ModelCarDto extends BaseDto {\n  @Expose()\n  @Type(() => BrandCarDto)\n  public brand: BrandCarDto;\n\n  @Expose()\n  public model: string;\n}\n","import { BrandCarDto } from '@car-mkd-systems/shared/dtos/modelCar/brand.car.dto';\nimport { Expose, Type } from 'class-transformer';\nimport { IsDefined, IsString } from 'class-validator';\n\n@Expose()\nexport class ModelCarFormDto {\n  @Expose()\n  @IsString({ message: \"Введите значение\" })\n  public model: string;\n\n  @Expose()\n  @IsDefined({ message: \"Не выбран бренд\" })\n  @Type(() => BrandCarDto)\n  public brand: BrandCarDto;\n}\n","import { Expose, Transform } from 'class-transformer';\nimport { IsNumber } from 'class-validator';\n\n@Expose()\nexport class PaginationDto {\n  @Expose()\n  @IsNumber()\n  @Transform((param) => parseInt(param.value, 0))\n  public limit: number;\n\n  @Expose()\n  @IsNumber()\n  @Transform((param) => parseInt(param.value, 0))\n  public offset: number;\n\n}\n","import { Expose } from 'class-transformer';\r\n\r\n@Expose()\r\nexport class ModificationDto {\r\n  @Expose()\r\n  public name: string;\r\n\r\n  @Expose()\r\n  public price: number;\r\n\r\n  @Expose()\r\n  public discount: number;\r\n\r\n  @Expose()\r\n  public pricePartner: number;\r\n\r\n  @Expose()\r\n  public discountPartner: number;\r\n\r\n  @Expose()\r\n  public params: Record<string, string> = {};\r\n}\r\n","import { CategoryDto } from '@car-mkd-systems/shared/dtos/category/category.dto';\r\nimport { FileDto } from '@car-mkd-systems/shared/dtos/file.dto';\r\nimport { ModelCarDto } from '@car-mkd-systems/shared/dtos/modelCar/model.car.dto';\r\nimport { ModificationDto } from '@car-mkd-systems/shared/dtos/product/modification.dto';\r\nimport { Expose, Type } from 'class-transformer';\r\nimport { IsDefined, IsInt, IsOptional, IsString } from 'class-validator';\r\n\r\n@Expose()\r\nexport class ProductFormDto {\r\n  @Expose()\r\n  @IsString({ message: \"Введите значение\" })\r\n  public name: string;\r\n\r\n  @Expose()\r\n  @IsInt({ message: \"Введите значение\" })\r\n  public amount: number;\r\n\r\n  @Expose()\r\n  @IsDefined({ message: \"Не выбрана категория\" })\r\n  @Type(() => CategoryDto)\r\n  public category: CategoryDto;\r\n\r\n  @Expose()\r\n  @IsOptional()\r\n  @Type(() => FileDto)\r\n  public images?: FileDto[] = [];\r\n\r\n  @Expose()\r\n  @IsOptional()\r\n  public isPublic?: boolean;\r\n\r\n  @Expose()\r\n  @IsOptional()\r\n  @Type(() => ModelCarDto)\r\n  public modelsCar?: ModelCarDto[] = [];\r\n\r\n  @Expose()\r\n  @IsOptional()\r\n  @Type(() => ModificationDto)\r\n  public modifications?: ModificationDto[] = [];\r\n}\r\n","import { PaginationDto } from '@car-mkd-systems/shared/dtos/pagination.dto';\nimport { Expose } from 'class-transformer';\nimport { IsArray, IsOptional } from 'class-validator';\n\n@Expose()\nexport class ProductQueryDto extends PaginationDto {\n\n  @Expose()\n  @IsArray()\n  @IsOptional()\n  public categories?: string[];\n\n  @Expose()\n  @IsArray()\n  @IsOptional()\n  public brands?: string[];\n\n  @Expose()\n  @IsArray()\n  @IsOptional()\n  public models?: string[];\n}\n","import { Expose } from 'class-transformer';\nimport { IsString } from 'class-validator';\n\n@Expose()\nexport class UserFormDto {\n  @Expose()\n  @IsString({ message: \"Введите логин\" })\n  public login: string;\n\n  @Expose()\n  @IsString({ message: \"Введите пароль\" })\n  public password: string;\n}\n","import { RoleEnum } from '@car-mkd-systems/shared/enums/role.enum';\nimport { Expose } from 'class-transformer';\nimport { IsString } from 'class-validator';\n\n@Expose()\nexport class UserSessionDto {\n\n  @Expose()\n  @IsString()\n  public _id: string;\n\n  @Expose()\n  @IsString()\n  public login: string;\n\n  @Expose()\n  @IsString()\n  public token: string;\n\n  @Expose()\n  public roles: RoleEnum[];\n\n}\n","export enum RoleEnum {\n  ADMIN = 'ADMIN',\n  PARTNER = 'PARTNER'\n}\n","import { ModelCar } from '@car-mkd-systems/shared/schemas/model.car.schema';\nimport { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport * as mongoose from 'mongoose';\nimport { Document } from 'mongoose';\n\n@Schema({ versionKey: false })\nexport class BrandCar extends Document {\n  @Prop({ required: true })\n  public brand: string;\n\n  @Prop({ type: [{type: [mongoose.Schema.Types.ObjectId], ref: \"ModelCar\"}]})\n  public models: ModelCar[];\n}\n\nexport const BrandCarSchema = SchemaFactory.createForClass(BrandCar);\n","import { Characteristic } from '@car-mkd-systems/shared/schemas/characteristic.schema';\nimport { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport * as mongoose from 'mongoose';\nimport { Document } from 'mongoose';\n\n@Schema({ versionKey: false })\nexport class Category extends Document {\n  @Prop({ required: true })\n  public name: string;\n\n  @Prop({ type: [{type: [mongoose.Schema.Types.ObjectId], ref: \"Characteristic\"}] })\n  public characteristics: Characteristic[];\n}\n\nexport const CategorySchema = SchemaFactory.createForClass(Category);\n","import { Category } from '@car-mkd-systems/shared/schemas/category.schema';\nimport { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport * as mongoose from 'mongoose';\nimport { Document } from 'mongoose';\n\n@Schema({ versionKey: false })\nexport class Characteristic extends Document {\n  @Prop({ required: true })\n  public name: string;\n\n  @Prop({ required: true })\n  public order: number;\n\n  @Prop({ required: true, type: mongoose.Schema.Types.ObjectId, ref: \"Category\" })\n  public category: Category;\n}\n\nexport const CharacteristicSchema = SchemaFactory.createForClass(Characteristic);\n","import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\r\nimport { Document } from 'mongoose';\r\n\r\n@Schema({ versionKey: false })\r\nexport class File extends Document {\r\n  @Prop({ required: true })\r\n  public path: string;\r\n\r\n  @Prop()\r\n  public name: string;\r\n\r\n  @Prop()\r\n  public mime: string;\r\n\r\n  @Prop()\r\n  public size: number;\r\n\r\n}\r\n\r\nexport const FileSchema = SchemaFactory.createForClass(File);\r\n","import { BrandCar } from '@car-mkd-systems/shared/schemas/brand.car.schema';\nimport { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport * as mongoose from 'mongoose';\nimport { Document } from 'mongoose';\n\n@Schema({ versionKey: false })\nexport class ModelCar extends Document {\n  @Prop({ required: true, type: mongoose.Schema.Types.ObjectId, ref: \"BrandCar\" })\n  public brand: BrandCar;\n\n  @Prop({ required: true })\n  public model: string;\n}\n\nexport const ModelCarSchema = SchemaFactory.createForClass(ModelCar);\n","import { ModificationDto } from '@car-mkd-systems/shared/dtos/product/modification.dto';\nimport { Category } from '@car-mkd-systems/shared/schemas/category.schema';\nimport { File } from '@car-mkd-systems/shared/schemas/file.schema';\nimport { ModelCar } from '@car-mkd-systems/shared/schemas/model.car.schema';\nimport { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport { Type } from 'class-transformer';\nimport * as mongoose from 'mongoose';\nimport { Document } from 'mongoose';\n\n@Schema({ versionKey: false })\nexport class Product extends Document {\n  @Prop({ required: true })\n  public name: string;\n\n  @Prop({ required: true })\n  public amount: number;\n\n  @Prop({ required: true, type: mongoose.Schema.Types.ObjectId, ref: \"Category\" })\n  public category: Category;\n\n  @Prop({ type: [{type: [mongoose.Schema.Types.ObjectId], ref: \"File\"}], default: [] })\n  public images: File[];\n\n  @Prop({ default: false })\n  public isPublic: boolean;\n\n  @Prop({ type: [{type: [mongoose.Schema.Types.ObjectId], ref: \"ModelCar\"}], default: []})\n  public modelsCar: ModelCar[];\n\n  @Prop({ type: [mongoose.Schema.Types.Mixed], default: [] })\n  @Type(() => ModificationDto)\n  public modifications: ModificationDto[];\n}\n\nexport const ProductSchema = SchemaFactory.createForClass(Product);\n","import { RoleEnum } from '@car-mkd-systems/shared/enums/role.enum';\nimport { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport { Document } from 'mongoose';\n\n@Schema({ versionKey: false })\nexport class User extends Document {\n  @Prop({ required: true })\n  public login: string;\n\n  @Prop({ required: true })\n  public password: string;\n\n  @Prop({ required: true })\n  public roles: RoleEnum[];\n\n  @Prop()\n  public token: string;\n}\n\nexport const UserSchema = SchemaFactory.createForClass(User);\n","module.exports = require(\"@nestjs/common\");","module.exports = require(\"@nestjs/core\");","module.exports = require(\"@nestjs/jwt\");","module.exports = require(\"@nestjs/mongoose\");","module.exports = require(\"@nestjs/passport\");","module.exports = require(\"@nestjs/platform-express\");","module.exports = require(\"bcrypt\");","module.exports = require(\"class-transformer\");","module.exports = require(\"class-validator\");","module.exports = require(\"express\");","module.exports = require(\"moment-timezone\");","module.exports = require(\"mongoose\");","module.exports = require(\"mongoose-query-parser\");","module.exports = require(\"multer\");","module.exports = require(\"passport-jwt\");","module.exports = require(\"tslib\");","module.exports = require(\"uuid\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * This is not a production server yet!\n * This is only a minimal backend to get started.\n */\n\nimport { Logger } from '@nestjs/common';\nimport { NestFactory } from '@nestjs/core';\n\nimport { AppModule } from './app/app.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n  const globalPrefix = 'api';\n  app.setGlobalPrefix(globalPrefix);\n  app.enableCors();\n  const port = process.env.PORT || 3333;\n  await app.listen(port, () => {\n    Logger.log('Listening at http://localhost:' + port + '/' + globalPrefix);\n  });\n}\n\nbootstrap().catch(Logger.error);\n"],"names":[],"sourceRoot":""}